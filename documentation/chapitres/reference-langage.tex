%!TEX encoding = UTF-8 Unicode
%!TEX root = ../piccolo.tex

\cleardoublepage

\chapter{Éléments lexicaux du langage Piccolo}

%--- Pour supprimer tout en-tête et pied de page sur la 1re page d'un chapitre
\thispagestyle{empty}


\section{Commentaires}

Un commentaire commence par un caractère dièse \piccolo{\#}, et s’étend jusqu’à la fin de la ligne courante.

\section{Délimiteurs}

Piccolo définit les délimiteurs listés dans le \refTableau{delimiteursLangage}.

\begin{table}[ht]
  \centering
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \texttt{*}  & \texttt{*+} & \texttt{,}  & \texttt{!=} & \texttt{<=} & \texttt{>=} & \texttt{*-} & \texttt{+*} & \texttt{;} & \texttt{:} & \texttt{==} & \texttt{<} & \texttt{>} & \texttt{[} & \texttt{]} & \texttt{.} & \texttt{!} \\
    \hline
    \texttt{\&} & \texttt{|}  & \texttt{\}} & \texttt{\}} & \texttt{(}  & \texttt{)}  & \texttt{/}  & \texttt{-} & \texttt{+} & \texttt{\textasciicircum} & \texttt{<{}<} & \texttt{>{}>} & \texttt{\textasciitilde} & \texttt{@} & \texttt{\%} & \texttt{=} & \texttt{?} \\
    \hline
  \end{tabular}
  \caption{Délimiteurs du langage Piccolo}
  \labelTableau{delimiteursLangage}
\end{table}

\section{Séparateurs}

Tout caractère dont le code ASCII est compris entre \texttt{0x01} et \texttt{0x20} est considéré comme un séparateur (ceci inclut donc la tabulation horizontale \texttt{HT} (\texttt{0x09}), le passage à la ligne \texttt{LF} (\texttt{0x0A}), le retour-chariot \texttt{CR} (\texttt{0x0D}), et l’espace (\texttt{0x20}).

\section{Identificateurs}
Un identificateur commence par une lettre (minuscule ou majuscule), qui est suivie par zéro, un ou plusieurs lettres (minuscules ou majuscules), chiffres décimaux, caractères \piccolo{\_}.

La casse est significative pour les identificateurs.

\section{Mots réservés}
\index{Mots réservés}

Certains identificateurs sont réservés. La casse n’est pas significative pour les mots réservés, c’est à dire que les mots réservés peuvent être écrits indifféremment avec des lettres minuscules ou majuscules. Il y a deux classes de mots réservés :
\begin{itemize}
  \item ceux correspondants aux éléments du langage (\refSubsectionPage{motsReservesLangage}) ;
  \item ceux correspondants aux instructions exécutables (\refSubsectionPage{motsReservesInstruction}).
\end{itemize}

\subsectionLabel{Mots réservés correspondants aux éléments du langage}{motsReservesLangage}

Les mots réservés correspondant aux éléments du langage sont listés dans le \refTableau{motReservesLangage}. Dans tout ce document, ces mots réservés sont écrits en minuscule, gras et en bleu.


\newcommand\keyWordLanguage[1]{\textcolor{blue}{\bf#1}}

\begin{table}[ht]
  \centering
\begin{tabular}{|l|l|l|l|l|l|}
  \hline
   \keyWordLanguage{bank} & \keyWordLanguage{banksave} & \keyWordLanguage{banksel} & \keyWordLanguage{baseline} & \keyWordLanguage{block} \\
  \hline
    \keyWordLanguage{bootloader} & \keyWordLanguage{byte} & \keyWordLanguage{computed} & \keyWordLanguage{configuration} & \keyWordLanguage{checkbank} \\
  \hline
     \keyWordLanguage{checknobank} & \keyWordLanguage{checkpic} & \keyWordLanguage{const} & \keyWordLanguage{contextsave} & \keyWordLanguage{data} \\
  \hline
   \keyWordLanguage{do} & \keyWordLanguage{end} & \keyWordLanguage{else} & \keyWordLanguage{elsif} & \keyWordLanguage{ensures}  \\
  \hline
     \keyWordLanguage{fast} & \keyWordLanguage{forever} & \keyWordLanguage{if}  & \keyWordLanguage{implements} & \keyWordLanguage{include} \\
  \hline
     \keyWordLanguage{inline} & \keyWordLanguage{interrupt} & \keyWordLanguage{mark} & \keyWordLanguage{midrange} & \keyWordLanguage{nobank}  \\
  \hline
   \keyWordLanguage{noreturn} & \keyWordLanguage{page} & \keyWordLanguage{pic18} & \keyWordLanguage{preserved} & \keyWordLanguage{ram} \\
  \hline
   \keyWordLanguage{requires} & \keyWordLanguage{rom} & \keyWordLanguage{routine} & \keyWordLanguage{unused} & \keyWordLanguage{uses} \\
  \hline
    \keyWordLanguage{w} & \keyWordLanguage{while} & & &\\
  \hline
\end{tabular}
  \caption{Mots réservés correspondant aux éléments du langage Piccolo}
  \labelTableau{motReservesLangage}
\end{table}





\subsectionLabel{Mots réservés correspondants aux instructions}{motsReservesInstruction}


Les mots réservés correspondant à des instructions exécutables sont listés dans le \refTableau{motReservesInstructions}. Dans tout ce document, ces mots réservés sont écrits en minuscule, gras et en marron. Pour les différencier, les instructions assembleur correspondantes sont écrites en majuscules.


\newcommand\keyWordInstruction[1]{\textcolor{brown}{\bf#1}}

\begin{table}[ht]
  \centering
\begin{tabular}{|l|l|l|l|l|l|l|}
  \hline
    \keyWordInstruction{addlw} & \keyWordInstruction{addwf} & \keyWordInstruction{addwfc} & \keyWordInstruction{andlw} & \keyWordInstruction{andwf} & \keyWordInstruction{bc} & \keyWordInstruction{bcf} \\
  \hline
    \keyWordInstruction{bn} & \keyWordInstruction{bnc} & \keyWordInstruction{bnn} & \keyWordInstruction{bov} & \keyWordInstruction{bnov} & \keyWordInstruction{bnz} & \keyWordInstruction{bsf} \\
  \hline
    \keyWordInstruction{bra} & \keyWordInstruction{btg} & \keyWordInstruction{bz} & \keyWordInstruction{call} & \keyWordInstruction{clrf} & \keyWordInstruction{clrw} & \keyWordInstruction{clrwdt} \\
  \hline
    \keyWordInstruction{comf} & \keyWordInstruction{daw} & \keyWordInstruction{decf} & \keyWordInstruction{incf} & \keyWordInstruction{iorlw} & \keyWordInstruction{iorwf} & \keyWordInstruction{goto} \\
  \hline
    \keyWordInstruction{jsr} & \keyWordInstruction{jump} & \keyWordInstruction{lfsr} & \keyWordInstruction{ldataptr} & \keyWordInstruction{ltblptr} & \keyWordInstruction{mnop} & \keyWordInstruction{movf} \\
  \hline
    \keyWordInstruction{movff} & \keyWordInstruction{movlw} & \keyWordInstruction{movwf} & \keyWordInstruction{mullw} & \keyWordInstruction{mulwf} & \keyWordInstruction{negf} & \keyWordInstruction{nop} \\
  \hline
    \keyWordInstruction{pop} & \keyWordInstruction{option} & \keyWordInstruction{push} & \keyWordInstruction{rcall} & \keyWordInstruction{reset} & \keyWordInstruction{retlw} & \keyWordInstruction{rlcf} \\
  \hline
    \keyWordInstruction{rlf} & \keyWordInstruction{rlncf} & \keyWordInstruction{rrcf} & \keyWordInstruction{rrf} & \keyWordInstruction{rrncf} & \keyWordInstruction{setf} & \keyWordInstruction{sleep} \\
  \hline
    \keyWordInstruction{subfwb} & \keyWordInstruction{sublw} & \keyWordInstruction{subwf} & \keyWordInstruction{subwfb} & \keyWordInstruction{swapf} & \keyWordInstruction{tblrd} & \keyWordInstruction{tblwt}\\
  \hline
    \keyWordInstruction{tris} & \keyWordInstruction{xorlw} & \keyWordInstruction{xorwf} & & & & \\
  \hline
\end{tabular}
  \caption{Mots réservés correspondant aux instructions exécutables Piccolo}
  \labelTableau{motReservesInstructions}
\end{table}



\section{Constante chaîne de caractères}

Comme en C, les chaînes de caractères sont délimitées par des caractères \piccolo{"}. Les séquences d’échappement suivantes sont acceptées : \piccolo{\\f}, \piccolo{\\n}, \piccolo{\\r}, \piccolo{\\v}, \piccolo{\\\\}, \piccolo{\\"}, \piccolo{\\'}, \piccolo{\\0}.

\section{Constante caractère}

Comme en C, les caractères sont délimités par des caractères \piccolo{'}.  Les séquences d’échappement suivantes sont acceptées : \piccolo{\\f}, \piccolo{\\n}, \piccolo{\\r}, \piccolo{\\v}, \piccolo{\\\\}, \piccolo{\\'}, \piccolo{\\0}.

\section{Constante entière}

Vous pouvez écrire les constantes entières en décimal, en hexadécimal ou en binaire. 

\textbf{Décimal.} Une constante entière décimale commence par un chiffre décimal, et est suivie par zéro, un ou plusieurs chiffres décimaux, ou caractères \piccolo{\_}.

\textbf{Hexadécimal.} Un chiffre hexadécimal est soit un chiffre décimal, soit une lettre entre \piccolo{a} et \piccolo{f}, écrite indifféremment en minuscule ou en majuscule. Une constante hexadécimale commence par la séquence \piccolo{0x} », et est suivie par un ou plusieurs chiffres hexadécimal, ou caractères \piccolo{\_}.

\textbf{Binaire.} Une constante entière binaire commence par la séquence \piccolo{0b} suivie par un ou plusieurs chiffres binaires, \piccolo{0} ou \piccolo{1}, ou le caractère \piccolo{\_}.

Dans une constante entière, écrite en binaire, décimal ou en hexadécimal, le caractère \piccolo{\_} peut servir de séparateur ; on peut ainsi écrire indifféremment : \piccolo{123}, \piccolo{1\_23}, \piccolo{1\_2\_3}, \piccolo{1\_\_\_23}, \dots

Attention :
\begin{itemize}
  \item contrairement au C, un nombre qui commence par un zéro est un nombre écrit en décimal ;
  \item contrairement à l’assembleur PIC, le préfixe \piccolo{0x} est indispensable pour écrire un nombre en hexadécimal.
\end{itemize}

\section{Format}

Le format est libre, la fin de ligne n’est pas significative (sauf pour les commentaires, qui commencent par un caractère dièse \piccolo{\#}, et s’étendent jusqu’à la fin de la ligne courante). Le compilateur accepte de manière indifférente que les fins de ligne soient codés par un caractère LF (\texttt{0x0A}), un caractère CR (\texttt{0x0D}), ou par la séquence CRLF (\texttt{0x0D}, \texttt{0x0A}).

À partir de la version 2.0.2, les commentaires commençant par \piccolo{\#!} sont capturés par l'application CocoaPiccolo pour être affichés dans le menu \emph{popup} d'accès aux routines.

