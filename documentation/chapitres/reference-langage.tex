%!TEX encoding = UTF-8 Unicode
%!TEX root = ../piccolo.tex


\chapter{Éléments lexicaux du langage Piccolo}

%--- Pour supprimer tout en-tête et pied de page sur la 1re page d'un chapitre
\thispagestyle{empty}


\section{Commentaires}

Un commentaire commence par un caractère dièse \pic+#+, et s’étend jusqu’à la fin de la ligne courante.

\section{Délimiteurs}

Piccolo définit les délimiteurs listés dans le \refTableau{delimiteursLangage}.

\begin{table}[!ht]
  \centering
  \begin{tabular}{ccccccccccccccccc}
    \pic!*!  & \pic!*+! & \pic!,!  & \pic+!=+ & \pic!<=! & \pic!>=! & \pic!*-! & \pic!+*! & \pic!;! & \pic!:! & \pic!==! & \pic!<! & \pic!>! & \pic![! & \pic!]! \\
    \pic!.! & \pic+!+ & \pic!&! & \pic!|!  & \pic!}! & \pic!}! & \pic!(!  & \pic!)!  & \pic!/!  & \pic!-! & \pic!+! & \pic!^! & \pic!<<! & \pic!>>! & \pic!~! \\
    \pic!@! & \pic!%! & \pic!=! & \pic!?! \\
  \end{tabular}
  \caption{Délimiteurs du langage Piccolo}
  \labelTableau{delimiteursLangage}
  \ligne
\end{table}

\section{Séparateurs}

Tout caractère dont le code ASCII est compris entre \texttt{0x01} et \texttt{0x20} est considéré comme un séparateur (ceci inclut donc la tabulation horizontale \texttt{HT} (\texttt{0x09}), le passage à la ligne \texttt{LF} (\texttt{0x0A}), le retour-chariot \texttt{CR} (\texttt{0x0D}), et l’espace (\texttt{0x20}).

\section{Identificateurs}
Un identificateur commence par une lettre (minuscule ou majuscule), qui est suivie par zéro, un ou plusieurs lettres (minuscules ou majuscules), chiffres décimaux, caractères \texttt{\_}.

La casse est significative pour les identificateurs.

\section{Mots réservés}
\index{Mots réservés}

Certains identificateurs sont réservés. La casse n’est pas significative pour les mots réservés, c’est à dire que les mots réservés peuvent être écrits indifféremment avec des lettres minuscules ou majuscules. Il y a deux classes de mots réservés :
\begin{itemize}
  \item ceux correspondants aux éléments du langage (\refSubsectionPage{motsReservesLangage}) ;
  \item ceux correspondants aux instructions exécutables (\refSubsectionPage{motsReservesInstruction}).
\end{itemize}

\subsectionLabel{Mots réservés correspondants aux éléments du langage}{motsReservesLangage}

Les mots réservés correspondant aux éléments du langage sont listés dans le \refTableau{motReservesLangage}. Dans tout ce document, ces mots réservés sont écrits en minuscule, gras et en bleu.


\newcommand\keyWordLanguage[1]{\textcolor{blue}{\bf#1}}

\begin{table}[!t]
  \centering
  \begin{tabular}{llllll}
   \keyWordLanguage{bank} & \keyWordLanguage{banksave} & \keyWordLanguage{banksel} & \keyWordLanguage{baseline} & \keyWordLanguage{block} \\
   \keyWordLanguage{bootloader} & \keyWordLanguage{byte} & \keyWordLanguage{case} & \keyWordLanguage{computed} & \keyWordLanguage{configuration} \\
   \keyWordLanguage{checkbank} & \keyWordLanguage{checknobank} & \keyWordLanguage{checkpic} & \keyWordLanguage{const} & \keyWordLanguage{contextsave} \\
   \keyWordLanguage{data} & \keyWordLanguage{do} & \keyWordLanguage{end} & \keyWordLanguage{else} & \keyWordLanguage{elsif}  \\
   \keyWordLanguage{ensures} & \keyWordLanguage{fast} & \keyWordLanguage{forever} & \keyWordLanguage{if}  & \keyWordLanguage{implements} \\
   \keyWordLanguage{include} & \keyWordLanguage{inline} & \keyWordLanguage{interrupt} & \keyWordLanguage{mark} & \keyWordLanguage{midrange}  \\
   \keyWordLanguage{nobank} & \keyWordLanguage{noreturn} & \keyWordLanguage{page} & \keyWordLanguage{pic18} & \keyWordLanguage{preserved} \\
   \keyWordLanguage{ram} & \keyWordLanguage{requires} & \keyWordLanguage{rom} & \keyWordLanguage{routine} & \keyWordLanguage{unused} \\
   \keyWordLanguage{switch} & \keyWordLanguage{uses} & \keyWordLanguage{w} & \keyWordLanguage{while} &\\
  \end{tabular}
  \caption{Mots réservés correspondant aux éléments du langage Piccolo}
  \labelTableau{motReservesLangage}
  \ligne
\end{table}





\subsectionLabel{Mots réservés correspondants aux instructions}{motsReservesInstruction}


Les mots réservés correspondant à des instructions exécutables sont listés dans le \refTableau{motReservesInstructions}. Dans tout ce document, ces mots réservés sont écrits en minuscule, gras et en marron. Pour les différencier, les instructions assembleur correspondantes sont écrites en majuscules.



\begin{table}[!t]
  \centering
\begin{tabular}{lllllll}
    \pic!addlw! & \pic!addwf! & \pic!addwfc! & \pic!andlw! & \pic!andwf! & \pic!bc! & \pic!bcf! \\
    \pic!bn! & \pic!bnc! & \pic!bnn! & \pic!bov! & \pic!bnov! & \pic!bnz! & \pic!bsf! \\
    \pic!bra! & \pic!btg! & \pic!bz! & \pic!call! & \pic!clrf! & \pic!clrw! & \pic!clrwdt! \\
    \pic!comf! & \pic!daw! & \pic!decf! & \pic!fnop! & \pic!goto! & \pic!incf! & \pic!iorlw! \\
    \pic!iorwf! & \pic!jsr! & \pic!jump! & \pic!lfsr! & \pic!ldataptr! & \pic!ltblptr! & \pic!mnop! \\
    \pic!movf! & \pic!movff! & \pic!movlw! & \pic!movwf! & \pic!mullw! & \pic!mulwf! & \pic!negf! \\
    \pic!nop! & \pic!pop! & \pic!option! & \pic!push! & \pic!rcall! & \pic!reset! & \pic!retlw! \\
    \pic!rlcf! & \pic!rlf! & \pic!rlncf! & \pic!rrcf! & \pic!rrf! & \pic!rrncf! & \pic!setf! \\
    \pic!sleep! & \pic!subfwb! & \pic!sublw! & \pic!subwf! & \pic!subwfb! & \pic!swapf! & \pic!tblrd!\\
    \pic!tblwt! & \pic!tris! & \pic!xorlw! & \pic!xorwf! & & & \\
\end{tabular}
  \caption{Mots réservés correspondant aux instructions exécutables Piccolo}
  \labelTableau{motReservesInstructions}
  \ligne
\end{table}



\section{Constante chaîne de caractères}

Comme en C, les chaînes de caractères sont délimitées par des caractères \texttt{"}. Les séquences d’échappement suivantes sont acceptées : \texttt{\textbackslash f}, \texttt{\textbackslash n}, \texttt{\textbackslash r}, \texttt{\textbackslash v}, \texttt{\textbackslash\textbackslash}, \texttt{\textbackslash\textquotedbl}, \texttt{\textbackslash\textquotesingle}, \texttt{\textbackslash0}.

\section{Constante caractère}

Comme en C, les caractères sont délimités par des caractères \texttt{'}.  Les séquences d’échappement suivantes sont acceptées : \texttt{\textbackslash f}, \texttt{\textbackslash n}, \texttt{\textbackslash r}, \texttt{\textbackslash v}, \texttt{\textbackslash\textbackslash}, \texttt{\textbackslash\textquotesingle}, \texttt{\textbackslash0}.

\section{Constante entière}

Vous pouvez écrire les constantes entières en décimal, en hexadécimal ou en binaire. 

\textbf{Décimal.} Une constante entière décimale commence par un chiffre décimal, et est suivie par zéro, un ou plusieurs chiffres décimaux, ou caractères \texttt{\_}.

\textbf{Hexadécimal.} Un chiffre hexadécimal est soit un chiffre décimal, soit une lettre entre \texttt{a} et \texttt{f}, écrite indifféremment en minuscule ou en majuscule. Une constante hexadécimale commence par la séquence \texttt{0x} », et est suivie par un ou plusieurs chiffres hexadécimal, ou caractères \texttt{\_}.

\textbf{Binaire.} Une constante entière binaire commence par la séquence \texttt{0b} suivie par un ou plusieurs chiffres binaires, \texttt{0} ou \texttt{1}, ou le caractère \texttt{\_}.

Dans une constante entière, écrite en binaire, décimal ou en hexadécimal, le caractère \texttt{\_} peut servir de séparateur ; on peut ainsi écrire indifféremment : \pic!123!, \pic!1_23!, \pic!1_2_3!, \pic!1___23!, \dots

Attention :
\begin{itemize}
  \item contrairement au C, un nombre qui commence par un zéro est un nombre écrit en décimal ;
  \item contrairement à l’assembleur PIC, le préfixe \texttt{0x} est indispensable pour écrire un nombre en hexadécimal.
\end{itemize}

\section{Format}

Le format est libre, la fin de ligne n’est pas significative (sauf pour les commentaires, qui commencent par un caractère dièse \texttt{\#}, et s’étendent jusqu’à la fin de la ligne courante). Le compilateur accepte de manière indifférente que les fins de ligne soient codés par un caractère LF (\texttt{0x0A}), un caractère CR (\texttt{0x0D}), ou par la séquence CRLF (\texttt{0x0D}, \texttt{0x0A}).

À partir de la version 2.0.2, les commentaires commençant par \texttt{\#!} sont capturés par l'application CocoaPiccolo pour être affichés dans le menu \emph{popup} d'accès aux routines.

