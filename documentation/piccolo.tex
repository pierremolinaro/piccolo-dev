%!TEX encoding = UTF-8 Unicode

\documentclass[a4paper,12pt,obeyspaces,openany]{book}
% L'option 'openany' permet de démarrer un chapitre sur une page paire

% L'option 'obeyspaces' indique au paquetage hyperref de respecter les espaces dans les chemins \path ou \url.
%
% Par exemple : \path{ab cd} est écrit ab cd
% Sans cette option, \path{ab cd} est écrit abcd
% Voir : http://compgroups.net/comp.text.tex/space-in-path-hyperref-package

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   « N O I R    E T    B L A N C »    O U    « C O U L E U R »                                                         *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Par défaut, l'impression se fait en couleur
\providecommand{\sortieEnCouleur}{true}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   A F F I C H E R    L E    D E T A I L    D E S    S C H É M A S    É L E C T R O N I Q U E S                        *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Par défaut, le détail des schémas est affiché
\providecommand\afficherDetailSchema{true}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   R É G L A G E S    « F R A N Ç A I S »                                                                              *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Paquetage pour imposer les réglages français
\usepackage[francais]{babel}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E N C O D A G E    D E S    S O U R C E S     :     U T F 8                                                         *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Paquetage pour le codage des sources en UTF8
\usepackage[utf8]{inputenc}

%--- Latex demande ce paquetage pour mieux afficher le caractère "°"
\usepackage{textcomp}

%--- Ce paquetage permet d'effectuer certaines césures, et ainsi d'éviter les messages "Overfull \hbox"
\usepackage[T1]{fontenc}


%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   M I S E    E N    P A G E S    D E M A N D É E     P A R     E L L I P S E S                                        *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%---------------------------------------------------- Mise en page
% Voir "Une courte introduction à Latex2e", § 6.4

%--- Marge gauche : 2,8 cm ; le paramètre \hoffset contient cette valeur, moins 1 pouce
%    \hoffset = 2,8 cm - 2,54 cm = 0,26 cm
\setlength{\hoffset}{-0.26 cm}
%
%%--- Hauteur de la page : 29,7 cm
%\setlength{\paperheight}{29.7 cm}
%
%--- Largeur de la page
%\setlength{\paperwidth}{18 cm}
%
%%--- Marges supplémentaires, différenciées pour les pages gauches et droites ; ici, aucune.
%\setlength{\oddsidemargin }{0 cm}
%\setlength{\evensidemargin}{0 cm}
%
%--- Largeur du texte
\setlength{\textwidth}{14 cm}
%
%%--- Marge haute : 2,8 cm ; le paramètre \voffset contient cette valeur, moins 1 pouce
%%    \voffset = 2,8 cm - 2,54 cm = 0,26 cm
%\setlength{\voffset}{0.26 cm}
%
%%--- Distance entre la marge haute et l'en-tête : 0 cm
%\setlength{\topmargin}{0 cm}
%
%%--- Hauteur de l'en-tête de chaque page : 1 cm
%\setlength{\headheight}{1 cm}
%
%%--- Distance entre l'en-tête de chaque page et le corps : 0,5 cm
%\setlength{\headsep}{0.5 cm}
%
%%--- Hauteur du corps
%%    \textheight = 29,7 cm - 2,8 cm - 2,8 cm - 1,5 cm = 22,6 cm
%\setlength{\textheight}{22.6 cm}
%
%%--------------------- Changer la taille des notes en bas de page
%%  footnotesize ---> small
%
%\let\oldfootnotesize\footnotesize
%\renewcommand*{\footnotesize}{\oldfootnotesize\small}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   P A Q U E T A G E    « I F T H E N »                                                                                *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Ce paquetage permet d'effectuer des tests : \ifthenelse{test}{bloc then}{bloc else}
\usepackage{ifthen}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   G E S T I O N    D E    L ' I N D E X                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% http://www.cuk.ch/articles/4097
% http://www.tuteurs.ens.fr/logiciels/latex/makeindex.html
% http://linux.die.net/man/1/makeindex
%
% Attention ! Les deux commandes suivantes, ainsi que le \printindex placé plus bas ne
% sont pas suffisants pour construire l'index : il faut utiliser l'utilitaire "makeIndex"
% Voir le fichier de commande "build.command"
\usepackage{makeidx}
\makeindex

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   H Y P E R R E F                                                                                                     *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*


%--- Pour les hyperliens, et le contrôle de la génération PDF 
\usepackage[pagebackref]{hyperref}

\hypersetup{pdftitle      = {Piccolo}}
\hypersetup{pdfauthor     = {Pierre Molinaro}}

\hypersetup{colorlinks    = true}
\hypersetup{anchorcolor   = black}
\hypersetup{filecolor     = black}
\hypersetup{menucolor     = black}
\hypersetup{plainpages    = false}
\hypersetup{pdfstartview  = FitH}
\hypersetup{pdfpagelayout = OneColumn}

%--- Contrôle des références de la bibliographie ; avec ces lignes, les pages où chaque item de la biblio
%    est appelée sont insérées à la fin de chaque entrée.
%\hypersetup{backref        = page}

\renewcommand*{\backrefalt}[4]{
  \ifcase #1 % case: not cited
    \ifthenelse{\equal{\sortieEnCouleur}{true}}{\textcolor{red}{\textbf{(non cité)}}}{\textbf{(non cité)}}. 
  \or % case: cited on exactly one page 
    (cité page #2).% 
  \else % case: cited on multiple pages 
    (cité pages #2). 
  \fi
} 
\renewcommand*{\backreftwosep}{ et }
\renewcommand*{\backreflastsep}{ et }


%--- Les hyperliens sont colorés en bleu dans la phase de mise au point, ils sont ainsi mieux visibles
\ifthenelse{\equal{\sortieEnCouleur}{true}}{
  \hypersetup{linkcolor  = blue}
  \hypersetup{urlcolor   = blue}
  \hypersetup{citecolor  = blue}
}{
  \hypersetup{linkcolor  = black}
  \hypersetup{urlcolor   = black}
  \hypersetup{citecolor  = black}
}

%---------------------------------------------------- Numéro de section
% Par défaut, une section est affichée avec son numéro de chapitre : par exemple : 2.1 Titre
% Les Éditions Ellipses précisent que le numéro de chapitre ne doit pas apparaître, ni dans le corps, ni dans l'en-tête
% Voir http://help-csli.stanford.edu/tex/latex-sections.shtml
% La solution suivante affecte aussi les sous-sections, ainsi que la table des matières.
%\renewcommand\thesection {\arabic{section}}

%---------------------------------------------------- Affichage des numéros de section
% C'est à dire les numéros qui sont affichées pour \section, \subsection, ...
% Par défaut, l'affichage se fait jusqu'au niveau 2 (\subsection)
% Avec cette commande, on va jusqu'au niveau \subsubsection.
%\setcounter{secnumdepth}{3}

%---------------------------------------------------- Définition de subsubsubsection
% http://forum.mathematex.net/latex-f6/definir-un-subsubsubsection-t4031.html
\makeatletter
\newcounter{subsubsubsection}[subsubsection]
\renewcommand\thesubsubsubsection{\thesubsubsection .\@alph\c@subsubsubsection}
\newcommand\subsubsubsection{\@startsection{subsubsubsection}{4}{\z@}%
                                     {-3.25ex\@plus -1ex \@minus -.2ex}%
                                     {1.5ex \@plus .2ex}%
                                     {\normalfont\normalsize\bfseries}}
\newcommand*\l@subsubsubsection{\@dottedtocline{3}{10.0em}{4.1em}}
\newcommand*{\subsubsubsectionmark}[1]{}
\makeatother

\makeatletter
\def\toclevel@subsubsubsection{4}
\makeatother

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UN TABLEAU
% La référence au tableau "nom-du-tableau" est définie par \labelTableau{nom-du-tableau}
\newcommand\labelTableau[1]{\label{tab:#1}}
% Latex autorise deux types d'appel à une référence \ref{tab:nom-du-tableau} et \pageref{tab:nom-du-tableau}

% \refTableau{}{nom-du-tableau} ---> "tableau x.y"   où x.y est le n° du tableau
\newcommand\refTableau[1]{\hyperref[tab:#1]{tableau \ref*{tab:#1}}}

% \refTableauSansPrefixe{}{nom-du-tableau} ---> "x.y"   où x.y est le n° du tableau
\newcommand\refTableauSansPrefixe[1]{\hyperref[tab:#1]{\ref*{tab:#1}}}

% \refTableauPage{}{nom-du-tableau} ---> "tableau x.y page n"   où x.y est le n° du tableau
\newcommand\refTableauPage[1]{\hyperref[tab:#1]{tableau \ref*{tab:#1} page \pageref{tab:#1}}}

% \refTableauPageSansPrefixe{}{nom-du-tableau} ---> "x.y page n"   où x.y est le n° du tableau
\newcommand\refTableauPageSansPrefixe[1]{\hyperref[tab:#1]{\ref*{tab:#1} page \pageref{tab:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE FIGURE
% La référence au tableau "nom-de-la-figure" est définie par \labelFigure{nom-de-la-figure}
\newcommand\labelFigure[1]{\label{fig:#1}}
% Latex autorise deux types d'appel à une référence \ref{fig:nom-de-la-figure} et \pageref{fig:nom-de-la-figure}

% \refFigure{}{nom-de-la-figure}   ---> "figure x.y"   où x.y est le n° de la figure
% \refFigure{z}{nom-de-la-figure}  ---> "figure x.y.z" où x.y est le n° de la figure
\newcommand\refFigure[2]{\hyperref[fig:#2]{figure \ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}}}}

% \refFigureSansPrefixe{}{nom-de-la-figure}   ---> "x.y"   où x.y est le n° de la figure
% \refFigureSansPrefixe{z}{nom-de-la-figure}  ---> "x.y.z" où x.y est le n° de la figure
\newcommand\refFigureSansPrefixe[2]{\hyperref[fig:#2]{\ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}}}}

% \refFigurePage{}{nom-de-la-figure}   ---> "figure x.y page n"   où x.y est le n° de la figure
% \refFigurePage{z}{nom-de-la-figure}  ---> "figure x.y.z page n" où x.y est le n° de la figure
\newcommand\refFigurePage[2]{\hyperref[fig:#2]{figure \ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}} page \pageref{fig:#2}}}

% \refFigurePageSansPrefixe{}{nom-de-la-figure}   ---> "x.y page n"   où x.y est le n° de la figure
% \refFigurePageSansPrefixe{z}{nom-de-la-figure}  ---> "x.y.z page n" où x.y est le n° de la figure
\newcommand\refFigurePageSansPrefixe[2]{\hyperref[fig:#2]{\ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}} page \pageref{fig:#2}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UN EXERCICE
% Les exercices sont toujours définis au niveau des sous-sections.
% Au lieu d'écrire \subsection{titre-exercice}, on écrit \subsectionExercice{titre-exercice}{label-exercice}
% De cette façon, un label est défini pour chaque exercice.
\newcommand\subsectionExercice[2]{\subsection{#1}\label{exo:#2}}

% \refExercicePage{label-exercice} ---> "exercice x.y page n" où x.y est le n° de l'exercice
\newcommand\refExercicePage[1]{\hyperref[exo:#1]{exercice \ref*{exo:#1} page \pageref{exo:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UN CHAPITRE
% Au lieu d'écrire \chapter{titre-chapitre}, on écrit \chapterLabel{titre-chapitre}{label-chapitre}
\newcommand \chapterLabel[2]{\chapter{#1}\label{chapter:#2}}


% \refChapter{label-chapter} ---> "chapitre n"
\newcommand \refChapter[1]{\hyperref[chapter:#1]{chapitre \ref*{chapter:#1}}}

\newcommand \refChapterPage[1]{\hyperref[chapter:#1]{chapitre \ref*{chapter:#1} page \pageref{chapter:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE SECTION
% Au lieu d'écrire \section{titre-section}, on écrit \sectionLabel{titre-section}{label-section}
\newcommand \sectionLabel[2]{\section{#1}\label{sec:#2}}


% \refSectionPage{label-section} ---> "section x.y page n"   où x.y est le n° de la section
\newcommand\refSectionPage[1]{\hyperref[sec:#1]{section \ref*{sec:#1} page \pageref{sec:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE SUB-SECTION
% Au lieu d'écrire \subsection{titre-section}, on écrit \subsectionLabel{titre-section}{label-section}
\newcommand \subsectionLabel[2]{\subsection{#1}\label{subsec:#2}}


% \refSubsectionPage{label-section} ---> "section x.y page n"   où x.y est le n° de la sub-section
\newcommand\refSubsectionPage[1]{\hyperref[subsec:#1]{section \ref*{subsec:#1} page \pageref{subsec:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE SUB-SUB-SECTION
% Au lieu d'écrire \subsubsection{titre-section}, on écrit \subsubsectionLabel{titre-section}{label-section}
\newcommand \subsubsectionLabel[2]{\subsubsection{#1}\label{subsubsec:#2}}


% \refSubsectionPage{label-section} ---> "page n"   où n est la page de la sub-sub-section
\newcommand\refSubsubsectionPage[1]{\hyperref[subsubsec:#1]{section \ref*{subsubsec:#1} page \pageref{subsubsec:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE SUB-SUB-SUB-SECTION
% Au lieu d'écrire \subsubsubsection{titre-section}, on écrit \subsubsubsectionLabel{titre-section}{label-section}
\newcommand \subsubsubsectionLabel[2]{\subsubsubsection{#1}\label{subsubsubsec:#2}}


% \refSubsubsubsectionPage{label-section} ---> "page n"   où n est la page de la sub-sub-section
\newcommand\refSubsubsubsectionPage[1]{\hyperref[subsubsubsec:#1]{page \pageref{subsubsubsec:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE ÉQUATION
% Pour une équation, au lieu d'écrire \label{label-equation}, on écrit \labelEquation{label-equation}
\newcommand \labelEquation[1]{\label{equ:#1}}

% \refEquationPage{label-equation} ---> "équation x.y page n" où x.y est le n° de l'équation
\newcommand\refEquationPage[1]{\hyperref[equ:#1]{équation \ref*{equ:#1} page \pageref{equ:#1}}}

% \refEquation{label-equation} ---> "équation x.y" où x.y est le n° de l'équation
\newcommand\refEquation[1]{\hyperref[equ:#1]{équation \ref*{equ:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UN SYSTÈME
% Pour latex, équation et systèmes (d'équation) sont numérotés grâce au même compteur ; on distingue les deux
% pour les référencements soient différents
% Pour un système, au lieu d'écrire \label{label-systeme}, on écrit \labelSystème{label-systeme}
\newcommand \labelSysteme[1]{\label{syst:#1}}

% \refSysteme{label-systeme} ---> "système x.y" où x.y est le n° du système
\newcommand\refSysteme[1]{\hyperref[syst:#1]{système \ref*{syst:#1}}}

% \refSystemeSansPrefixe{label-systeme} ---> "x.y" où x.y est le n° du système
\newcommand\refSystemeSansPrefixe[1]{\hyperref[syst:#1]{\ref*{syst:#1}}}

% \refSystemePage{label-systeme} ---> "système x.y page n" où x.y est le n° du système
\newcommand\refSystemePage[1]{\hyperref[syst:#1]{système \ref*{syst:#1} page \pageref{syst:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE NOTE DE BAS DE PAGE
\newcommand \labelNote[1]{\label{footnote:#1}}

\newcommand\refNote[1]{\hyperref[footnote:#1]{$^{\ref*{footnote:#1}}$}}

\newcommand\refNotePage[1]{\hyperref[footnote:#1]{$^{\ref*{footnote:#1}~page~\pageref{footnote:#1}}$}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E X T E N S I O N S    P O U R    P R É S E N T E R    L E S    T A B L E A U X                                     *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{array}
\usepackage[table]{xcolor}

\renewcommand{\arraystretch}{1.2}

%--- Couleur de fond alternée des tableaux
\ifthenelse{\equal{\sortieEnCouleur}{true}}{
  \newcommand\fondTableau{yellow!25}
}{
  \newcommand\fondTableau{gray!25}
}

%--- Ce paquetage permet d'utiliser les environnements wrapfigure et wraptable pour insérer les figures et
% les tableaux dans le texte.
\usepackage{wrapfig}

%--- Ce paquetage permet de changer le style des légendes des tableaux et des figures (voir caption-eng.pdf) :
%  - l'étiquette est en italique gras
%  - le titre est en italique.
\usepackage[font=it, labelfont=bf]{caption}

%--- Changement des réglages par défaut 

%--- Par défaut, le paquetage nomme "Table" les tableaux. La commande
%   suivante impose le nom "Tableau"
% Voir http://fr.wikibooks.org/wiki/LaTeX/Éléments_flottants_et_figures
\addto\captionsfrench{\def\tablename{Tableau}}

%--- Par défaut, le paquetage écrit "Figure" en petites capitales. La commande
%   suivante l'écrit comme indiqué par les les paramètres du paquatage "caption"
% Voir http://fr.wikibooks.org/wiki/LaTeX/Éléments_flottants_et_figures
\addto\captionsfrench{\def\figurename{Figure}}

%--- De même, le sommaire est appelé "Table des matières"
% La commande suivante impose le nom "Sommaire"
%\addto\captionsfrench{\def\contentsname{Sommaire}}

%--- De même, la liste des figures sommaire est appelé "Table des figures"
% La commande suivante impose le nom "Liste des figures"
\addto\captionsfrench{\def\listfigurename{Liste des figures}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E X T E N S I O N S    P O U R    L ' É C R I T U R E    D E S     F O R M U L E S    M A T H É M A T I Q U E S     *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Extensions pour l'écriture des formules mathématiques
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}

%--- Paquetage "IEEEtrantools"
% Pour créer des tableaux d'équations, bien alignées
% Voir courte-intro-latex.pdf, page §3.5.2 page 83
%\usepackage[retainorgcmds]{IEEEtrantools}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   C H O I X    D E    L A    P O L I C E                                                                              *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% http://www.cuk.ch/articles/4237
% Un seul des choix suivants doit être validé ; si aucun, c'est la police par défaut qui est utilisée

%---------------------------------------------------- Pour utiliser la police "Lucida Grande" (non installée par défaut dans Latex)
%\usepackage{textcomp} % to get the right copyright pour Lucida fonts
%\usepackage[altbullet]{lucidabr}   % Lucida fonts (text and math) 
%\DeclareEncodingSubset{TS1}{hlh}{1}  % including \oldstylenums 

%---------------------------------------------------- Pour utiliser la police "Times"
%\renewcommand{\rmdefault}{ptm}
%\usepackage{mathptmx}

%---------------------------------------------------- Pour utiliser la police "Palatino"
%\renewcommand{\rmdefault}{ppl}
%\usepackage{mathpazo}

%---------------------------------------------------- Pour utiliser la police "Bookman"
%\usepackage{bookman}

%---------------------------------------------------- Pour utiliser la police "Fourier"
\usepackage{fouriernc}
\usepackage[scaled=0.875]{helvet}
\usepackage[scaled=0.9]{couriers}

%---------------------------------------------------- Pour utiliser la police "Beton, euler"
%\usepackage{beton, euler}

%---------------------------------------------------- Pour utiliser la police "Utopia - MathDesign"
%\usepackage[utopia]{mathdesign}

%---------------------------------------------------- Pour utiliser la police "Charter - MathDesign"
%\usepackage[charter]{mathdesign}


%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   P A Q U E T A G E    « S U B F I G »                                                                                *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Grâce à ce paquetage, il est possible de placer plusieurs figures, tables, côte à côte.
% Voir http://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions
\usepackage{subfig}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   P A Q U E T A G E    « M U L T I C O L »                                                                            *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{multicol}
\setlength{\columnsep}{30pt}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   P A Q U E T A G E    « E M P T Y P A G E »                                                                          *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Supprime en-têtes et pieds de pages sur les pages vides
% Merci à Éric Le Carpentier !

\usepackage{emptypage}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   T I K Z    -    P G F                                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{tikz}
\usetikzlibrary{calc}
\usepackage{pgfplots}
\usetikzlibrary{arrows}
\usetikzlibrary{decorations}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{decorations.shapes}
\usetikzlibrary{shapes.callouts}
\usepgfmodule{plot}

%--- Contrôle de l'affichage des circuits électroniques
\ifthenelse{\equal{\sortieEnCouleur}{true} \and \equal{\afficherDetailSchema}{true}}{

}{
  \newcommand\PMCouleurGrilleSchema{white} % Pour afficher la grille des schémas en blanc (donc invisible)
  \newcommand\PMAfficherPoint{0} % Pour ne pas afficher les points (par défaut, ils sont affichés)
  \newcommand\PMCouleurFondComposantsIntegres{\fondTableau} % Couleur de fond des composants intégrés
}

%--- Autre couleur utilisée
\ifthenelse{\equal{\sortieEnCouleur}{true}}{
  \newcommand\couleurAlterneeSchema{green!50}
}{
  \newcommand\couleurAlterneeSchema{gray!50}
}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   P A Q U E T A G E    « L I S T I N G S »    ( p o u r    P I C C O L O )                                            *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{listings}

%-----------------------------------------------------------------------------------------------------------------------*

\lstdefinelanguage{piccolo}{
  style=piccolo,
  keywords={bank, banksave, banksel, baseline, bootloader, byte, computed, configuration, const,
     contextsave, data, default, do, end, else, elsif, fast, forever, if, implements,
     include, interrupt, mark, midrange, nobank, noreturn, page, pic18, preserved,
     ram, requires, rom, ensures, routine, uses, w, while},
  keywordstyle=\bf\color{blue},
  sensitive=false,
  keywords=[2]{addlw, addwf, addwfc, andlw, andwf, bc, bcf, bn, bnc, bnn, bov, bnov, bnz, bsf,
    bra, btg, bz, call, clrf, clrw, clrwdt, comf, daw, decf, incf, iorlw, iorwf, goto, jsr, jump,
    lfsr, ldataptr, ltblptr, mnop, movf, movff, movlw, movwf, mullw, mulwf, negf, nop, pop, option,
    push, rcall, reset, retlw, rlcf, rlf, rlncf, rrcf, rrf, rrncf, setf, sleep, subfwb, sublw, subwf,
    subwfb, swapf, tblrd, tblwt, tris, xorlw, xorwf},
  keywordstyle=[2]\bf\color{brown},
  comment=[l]{\#},
}

\ifthenelse{\equal{\sortieEnCouleur}{true}}{
  \lstdefinestyle{piccolo}{
    basicstyle=\ttfamily\small,
    frame=l,
    backgroundcolor=\color{yellow!10},
    numberstyle=\ttfamily\small,
    xleftmargin=20pt
  }
}{
  \lstdefinestyle{piccolo}{
    basicstyle=\ttfamily\small,
    frame=l,
    numberstyle=\ttfamily\small,
    xleftmargin=20pt
  }
}

\newcommand\piccolo[1]{{\ttfamily\small #1}}

%-----------------------------------------------------------------------------------------------------------------------*

\lstdefinelanguage{assembleur}{
  style=assembleur,
  comment=[l]{\%},
}
\ifthenelse{\equal{\sortieEnCouleur}{true}}{
  \lstdefinestyle{assembleur}{
    basicstyle=\ttfamily\small,
%    frame=l,
%    backgroundcolor=\color{yellow!10},
    numberstyle=\ttfamily\small,
    xleftmargin=20pt
  }
}{
  \lstdefinestyle{assembleur}{
    basicstyle=\ttfamily\small,
%    frame=l,
    numberstyle=\ttfamily\small,
    xleftmargin=20pt
  }
}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   F O O T N O T E    P A C K A G E                                                                                    *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Ce paquatage permet d'utiliser des \footnote dans un tableau
% http://texblog.org/2012/02/03/using-footnote-in-a-table/
\usepackage{footnote}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E N - T Ê T E S    E T    P I E D S    D E    P A G E S                                                             *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Grâce au package "fancyhdr"
% voir http://www.exomatik.net/U-Latex/Personnaliser#toc2
%      http://www.trustonme.net/didactels/250.html
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{} % clear all header fields
\fancyfoot{} % clear all footer fields
%--- Numéro de page : à gauche pages paires, à droite pages impaires
\fancyhead[EL,OR]{\thepage}
%--- Nom de chapitre : à droite page paires
\fancyhead[ER]{\leftmark}
%--- Nom de section : à gauche page impaires
\fancyhead[OL]{\rightmark}
%--- filet en haut de page
\renewcommand{\headrulewidth}{0.5 pt}
\renewcommand{\footrulewidth}{0 pt}

\renewcommand{\chaptermark}[1]{\markboth{\bsc{\chaptername~\thechapter{}.} #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\bsc{\thesection{}.} #1}{}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   À    C O M P L É T E R                                                                                              *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Cette commande est temporaire, elle permet d'écrire dans le texte une boîte
% où figure le texte "À COMPLÉTER"
% Quand l'ouvrage sera terminé, cette commande sera supprimée

%\ifthenelse{\equal{\sortieEnCouleur}{true}}{
%  \newcommand\pasFini{\textbf{\textcolor{red}{[À COMPLÉTER]\cite{pasFini}}}}
%}{
%  \newcommand \pasFini{\textbf{[À COMPLÉTER]\cite{pasFini}}}
%}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   T O C B I D I N D                                                                                                   *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%    Pour faire figurer la liste des tableaux (et la table des matières)
%    dans la table des matières
\usepackage{tocbibind}
\setcounter{tocdepth}{2}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   D P R O G R E S S                                                                                                   *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%   Ce paquetage permet d'afficher dans le "log" les titres de section et de sous-section, facilitant ainsi la
%   localisation des warnings
\usepackage{dprogress}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   D É B U T    D U    D O C U M E N T                                                                                 *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\begin{document} 

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   P A G E    D E    T I T R E                                                                                         *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\newcommand\titreOuvrage{\textbf{Piccolo \input{files-from-piccolo/version-piccolo.txt}}}

\ifthenelse{\equal{\sortieEnCouleur}{true}}{
  \title{\textcolor{blue}{\titreOuvrage}}
}{
  \title{\titreOuvrage}
}

\author{Pierre Molinaro}

\date{\today} 

\maketitle

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   A S S E M B L E U R                                                                                                 *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\newcommand\assembleur[1]{\texttt{\small#1}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   A V A N T    P R O P O S                                                                                            *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%\input{chapitres/avant-propos.tex}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   T A B L E    D E S    M A T I È R E S                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\clearpage
\tableofcontents
%--- La commande suivante supprime tout en-tête et tout pied de page sur la première page du sommaire
%    http://www.developpez.net/forums/d604749/autres-langages/autres-langages/latex/probleme-numerotation-bas-page-table-matieres/
\addtocontents{toc}{\protect\thispagestyle{empty}\protect\pagestyle{fancy}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   L I S T E    D E S    T A B L E A U X                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\cleardoublepage
\listoftables
\addtocontents{lot}{\protect\thispagestyle{empty}\protect\pagestyle{fancy}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   L I S T E    D E S    F I G U R E S                                                                                 *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%\cleardoublepage
%\listoffigures
%\addtocontents{lof}{\protect\thispagestyle{empty}\protect\pagestyle{fancy}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   L I S T E    D E S    P R O G R A M M E S    S P I C E                                                              *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%\cleardoublepage
%\addtocontents{prgm-spice}{\protect\thispagestyle{empty}\protect\pagestyle{fancy}}
%\begingroup
%  \tocfile{\listprogrammeSpicename}{prgm-spice}
%\endgroup

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   L E S    C H A P I T R E S                                                                                          *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\input{chapitres/pourquoi-piccolo.tex}
\input{chapitres/installation-utilisation.tex}
\input{chapitres/reference-langage.tex}
\input{chapitres/baseline.tex}
\input{chapitres/midrange.tex}
\input{chapitres/pic18.tex}
\input{chapitres/instructions-structurees.tex}
\input{chapitres/ram.tex}
\input{chapitres/constantes.tex}
\input{chapitres/configuration.tex}

%\input{chapitre-dipole-et-quadripole/chapitre-dipole-et-quadripole.tex}
%\input{chapitre-simulation/chapitre-simulation.tex}
%\input{chapitre-ci-logiques/chapitre-ci-logiques.tex}
%\input{chapitre-diode/chapitre-diode.tex}
%\input{chapitre-transistor-bipolaire/chapitre-transistor-bipolaire.tex}
%\input{chapitre-transistor-mosfet/chapitre-transistor-mosfet.tex}
%\input{chapitre-amplificateur-operationnel/chapitre-amplificateur-operationnel.tex}
%\input{chapitre-regulateurs-integres/chapitre-regulateurs-integres.tex}












%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   B I B L I O G R A P H I E                                                                                           *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%\input{bibliographie/bibliographie.tex}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   I N D E X                                                                                                           *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\phantomsection  % Pour faire correctement pointer l'hyperlien dans la table des matières

%--- Redéfinir le style pour les pages d'index
%    Le style à redéfinir *doit* être le style "plain" (http://www.tug.org/pipermail/pdftex/2004-April/004942.html)
\fancypagestyle{plain}{
  \fancyhead{} % clear all header fields
  \fancyfoot{} % clear all footer fields
  %--- Numéro de page : à gauche pages paires, à droite pages impaires
%  \fancyhead[EL,OR]{\thepage}
  %--- Nom de chapitre : à droite page paires
%  \fancyhead[ER]{Index}
  %--- Nom de l'entrée courante : à gauche page impaires (???)
  %\fancyhead[OL]{\topxmark}
  %--- Filet de 0 pt
  \renewcommand{\headrulewidth}{0 pt}
}


%--- Écrire l'index
\printindex
%--- Appliquer le style
\pagestyle{plain}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   F I N    D U    D O C U M E N T                                                                                     *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\end{document}
