//---------------------------------------------------------------------------*
//                                                                           *
//                       File 'baseline_analysis.cpp'                        *
//                        Generated by version 2.4.3                         *
//                      april 8th, 2013, at 15h56'24"                        *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "baseline_analysis.h"
#include "galgas2/C_Compiler.h"
#include "galgas2/C_galgas_io.h"
#include "galgas2/C_galgas_CLI_Options.h"
#include "utilities/C_PrologueEpilogue.h"

//---------------------------------------------------------------------------*

#include "piccoloDevice_grammar.h"
#include "piccolo_options.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "baseline_analysis.gSemantics", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif

//---------------------------------------------------------------------------*
//                                                                           *
//                        Routine 'baseline_analysis'                        *
//                                                                           *
//---------------------------------------------------------------------------*

void routine_baseline_5F_analysis (const GALGAS_baseline_5F_model constinArgument_inPiccoloModel,
                                   const GALGAS_string constinArgument_inSourceFileName,
                                   C_Compiler * inCompiler
                                   COMMA_UNUSED_LOCATION_ARGS) {
  //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
  GALGAS_string var_sourceFileBaseName = constinArgument_inSourceFileName.reader_lastPathComponent (SOURCE_FILE_AT_LINE (26)).reader_stringByDeletingPathExtension (SOURCE_FILE_AT_LINE (26)) ;
  //-------- @ifInstructionForGeneration
  const enumGalgasBool test_0 = GALGAS_bool (kIsNotEqual, var_sourceFileBaseName.objectCompare (constinArgument_inPiccoloModel.reader_mProgramName (SOURCE_FILE_AT_LINE (27)).reader_string (SOURCE_FILE_AT_LINE (27)))).boolEnum () ;
  if (kBoolTrue == test_0) {
    //-------- @errorInstructionForGeneration
    GALGAS_location location_1 (constinArgument_inPiccoloModel.reader_mProgramName (SOURCE_FILE_AT_LINE (28)).reader_location (HERE)) ; // Implicit use of 'location' reader
    inCompiler->emitSemanticError (location_1, GALGAS_string ("the program name ('").operator_concat (constinArgument_inPiccoloModel.reader_mProgramName (SOURCE_FILE_AT_LINE (28)).reader_string (SOURCE_FILE_AT_LINE (28)) COMMA_SOURCE_FILE_AT_LINE (28)).operator_concat (GALGAS_string ("') should be identical to the file base name '") COMMA_SOURCE_FILE_AT_LINE (29)).operator_concat (var_sourceFileBaseName COMMA_SOURCE_FILE_AT_LINE (29)).operator_concat (GALGAS_string ("'") COMMA_SOURCE_FILE_AT_LINE (29)) COMMA_SOURCE_FILE_AT_LINE (28)) ;
  }
  //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
  GALGAS_string var_listFileContents = GALGAS_string::makeEmptyString () ;
  //-------- @localVariableDeclarationForGeneration
  GALGAS_piccoloDeviceModel var_piccoloDeviceModel ;
  { //-------- @routineCallInstructionForGeneration
  routine_parseDeviceDefinition (constinArgument_inPiccoloModel.reader_mDeviceName (SOURCE_FILE_AT_LINE (34)), var_piccoloDeviceModel, inCompiler COMMA_SOURCE_FILE_AT_LINE (34)) ;
  } //-------- @routineCallInstructionForGeneration
  //------- @switchInstructionForGeneration
  if (var_piccoloDeviceModel.reader_mProcessorType (SOURCE_FILE_AT_LINE (35)).isValid ()) {
    switch (var_piccoloDeviceModel.reader_mProcessorType (SOURCE_FILE_AT_LINE (35)).enumValue ()) {
    case GALGAS_processorType::kNotBuilt:
      break ;
    case GALGAS_processorType::kEnum_baseline: {
      } break ;
    case GALGAS_processorType::kEnum_pic_31__38__5F__36__30_: case GALGAS_processorType::kEnum_pic_31__38__5F__38__30_: {
      //-------- @errorInstructionForGeneration
      GALGAS_location location_2 (constinArgument_inPiccoloModel.reader_mDeviceName (SOURCE_FILE_AT_LINE (37)).reader_location (HERE)) ; // Implicit use of 'location' reader
      inCompiler->emitSemanticError (location_2, GALGAS_string ("a pic18 device is not accepted here : only a baseline device") COMMA_SOURCE_FILE_AT_LINE (37)) ;
      } break ;
    case GALGAS_processorType::kEnum_midrange: {
      //-------- @errorInstructionForGeneration
      GALGAS_location location_3 (constinArgument_inPiccoloModel.reader_mDeviceName (SOURCE_FILE_AT_LINE (38)).reader_location (HERE)) ; // Implicit use of 'location' reader
      inCompiler->emitSemanticError (location_3, GALGAS_string ("a mid-ranfe device is not accepted here : only a baseline device") COMMA_SOURCE_FILE_AT_LINE (38)) ;
      } break ;
    }
  }
  //-------- @localVariableDeclarationForGeneration
  GALGAS_actualConfigurationMap var_actualConfigurationMap ;
  { //-------- @routineCallInstructionForGeneration
  routine_buildConfig (var_piccoloDeviceModel.reader_mConfigRegisterMap (SOURCE_FILE_AT_LINE (43)), constinArgument_inPiccoloModel.reader_mConfigDefinitionList (SOURCE_FILE_AT_LINE (44)), constinArgument_inPiccoloModel.reader_mAcceptDefaultConfiguration (SOURCE_FILE_AT_LINE (45)), var_listFileContents, var_actualConfigurationMap, inCompiler COMMA_SOURCE_FILE_AT_LINE (42)) ;
  } //-------- @routineCallInstructionForGeneration
  //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
  GALGAS_registerTable var_registerTable = var_piccoloDeviceModel.reader_mRegisterTable (SOURCE_FILE_AT_LINE (51)) ;
  //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
  GALGAS_ramBankTable var_ramBank = var_piccoloDeviceModel.reader_mRamBankTable (SOURCE_FILE_AT_LINE (52)) ;
}


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2


