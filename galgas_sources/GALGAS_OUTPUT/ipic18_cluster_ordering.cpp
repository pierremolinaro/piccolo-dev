//---------------------------------------------------------------------------*
//                                                                           *
//                    File 'ipic18_cluster_ordering.cpp'                     *
//                        Generated by version 2.5.0                         *
//                     august 11th, 2013, at 18h29'50"                       *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "ipic18_cluster_ordering.h"
#include "galgas2/C_Compiler.h"
#include "galgas2/C_galgas_io.h"
#include "galgas2/C_galgas_CLI_Options.h"
#include "utilities/C_PrologueEpilogue.h"

//---------------------------------------------------------------------------*


//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "ipic18_cluster_ordering.gSemantics", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif

//---------------------------------------------------------------------------*
//                                                                           *
//                 Class for element of '@clusterList' list                  *
//                                                                           *
//---------------------------------------------------------------------------*

class cCollectionElement_clusterList : public cCollectionElement {
  public : GALGAS_clusterList_2E_element mObject ;

//--- Constructor
  public : cCollectionElement_clusterList (const GALGAS_ipic_31__38_BlockList & in_mBlockList
                                           COMMA_LOCATION_ARGS) ;

//--- Virtual method for comparing elements
  public : virtual typeComparisonResult compare (const cCollectionElement * inOperand) const ;

//--- Virtual method that checks that all attributes are valid
  public : virtual bool isValid (void) const ;

//--- Virtual method that returns a copy of current object
  public : virtual cCollectionElement * copy (void) ;

//--- Description
 public : virtual void description (C_String & ioString, const PMSInt32 inIndentation) const ;
} ;

//---------------------------------------------------------------------------*

cCollectionElement_clusterList::cCollectionElement_clusterList (const GALGAS_ipic_31__38_BlockList & in_mBlockList
                                                                COMMA_LOCATION_ARGS) :
cCollectionElement (THERE),
mObject (in_mBlockList) {
}

//---------------------------------------------------------------------------*

bool cCollectionElement_clusterList::isValid (void) const {
  return mObject.isValid () ;
}

//---------------------------------------------------------------------------*

cCollectionElement * cCollectionElement_clusterList::copy (void) {
  cCollectionElement * result = NULL ;
  macroMyNew (result, cCollectionElement_clusterList (mObject.mAttribute_mBlockList COMMA_HERE)) ;
  return result ;
}

//---------------------------------------------------------------------------*

void cCollectionElement_clusterList::description (C_String & ioString, const PMSInt32 inIndentation) const {
  ioString << "\n" ;
  ioString.writeStringMultiple ("| ", inIndentation) ;
  ioString << "mBlockList" ":" ;
  mObject.mAttribute_mBlockList.description (ioString, inIndentation) ;
}

//---------------------------------------------------------------------------*

typeComparisonResult cCollectionElement_clusterList::compare (const cCollectionElement * inOperand) const {
  cCollectionElement_clusterList * operand = (cCollectionElement_clusterList *) inOperand ;
  macroValidSharedObject (operand, cCollectionElement_clusterList) ;
  return mObject.objectCompare (operand->mObject) ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList::GALGAS_clusterList (void) :
AC_GALGAS_list () {
}

//---------------------------------------------------------------------------*

GALGAS_clusterList::GALGAS_clusterList (cSharedList * inSharedListPtr) :
AC_GALGAS_list (inSharedListPtr) {
  if (NULL == inSharedListPtr) {
    createNewEmptyList (HERE) ;
  }
}

//---------------------------------------------------------------------------*

GALGAS_clusterList GALGAS_clusterList::constructor_emptyList (LOCATION_ARGS) {
  GALGAS_clusterList result ;
  result.createNewEmptyList (THERE) ;
  return result ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList GALGAS_clusterList::constructor_listWithValue (const GALGAS_ipic_31__38_BlockList & inOperand0
                                                                  COMMA_LOCATION_ARGS) {
  GALGAS_clusterList result ;
  if (inOperand0.isValid ()) {
    result.createNewEmptyList (THERE) ;
    capCollectionElement attributes ;
    GALGAS_clusterList::makeAttributesFromObjects (attributes, inOperand0 COMMA_THERE) ;
    result.addObject (attributes) ;
  }
  return result ;
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::makeAttributesFromObjects (capCollectionElement & outAttributes,
                                                    const GALGAS_ipic_31__38_BlockList & in_mBlockList
                                                    COMMA_LOCATION_ARGS) {
  cCollectionElement_clusterList * p = NULL ;
  macroMyNew (p, cCollectionElement_clusterList (in_mBlockList COMMA_THERE)) ;
  outAttributes.setPointer (p) ;
  macroDetachSharedObject (p) ;
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::addAssign_operation (const GALGAS_ipic_31__38_BlockList & inOperand0
                                              COMMA_LOCATION_ARGS) {
  if (isValid () && inOperand0.isValid ()) {
    cCollectionElement * p = NULL ;
    macroMyNew (p, cCollectionElement_clusterList (inOperand0 COMMA_THERE)) ;
    capCollectionElement attributes ;
    attributes.setPointer (p) ;
    macroDetachSharedObject (p) ;
    addObject (attributes) ;
  }
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::modifier_insertAtIndex (const GALGAS_ipic_31__38_BlockList inOperand0,
                                                 const GALGAS_uint inInsertionIndex,
                                                 C_Compiler * inCompiler
                                                 COMMA_LOCATION_ARGS) {
  if (isValid () && inInsertionIndex.isValid () && inOperand0.isValid ()) {
    cCollectionElement * p = NULL ;
    macroMyNew (p, cCollectionElement_clusterList (inOperand0 COMMA_THERE)) ;
    capCollectionElement attributes ;
    attributes.setPointer (p) ;
    macroDetachSharedObject (p) ;
    addObjectAtIndex (attributes, inInsertionIndex.uintValue (), inCompiler COMMA_THERE) ;
  }
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::modifier_removeAtIndex (GALGAS_ipic_31__38_BlockList & outOperand0,
                                                 const GALGAS_uint inRemoveIndex,
                                                 C_Compiler * inCompiler
                                                 COMMA_LOCATION_ARGS) {
  if (isValid () && inRemoveIndex.isValid ()) {
    capCollectionElement attributes ;
    removeObjectAtIndex (attributes, inRemoveIndex.uintValue (), inCompiler COMMA_THERE) ;
    cCollectionElement_clusterList * p = (cCollectionElement_clusterList *) attributes.ptr () ;
    if (NULL == p) {
      outOperand0.drop () ;
    }else{
      macroValidSharedObject (p, cCollectionElement_clusterList) ;
      outOperand0 = p->mObject.mAttribute_mBlockList ;
    }
  }
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::modifier_popFirst (GALGAS_ipic_31__38_BlockList & outOperand0,
                                            C_Compiler * inCompiler
                                            COMMA_LOCATION_ARGS) {
  capCollectionElement attributes ;
  removeFirstObject (attributes, inCompiler COMMA_THERE) ;
  cCollectionElement_clusterList * p = (cCollectionElement_clusterList *) attributes.ptr () ;
  if (NULL == p) {
    outOperand0.drop () ;
  }else{
    macroValidSharedObject (p, cCollectionElement_clusterList) ;
    outOperand0 = p->mObject.mAttribute_mBlockList ;
  }
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::modifier_popLast (GALGAS_ipic_31__38_BlockList & outOperand0,
                                           C_Compiler * inCompiler
                                           COMMA_LOCATION_ARGS) {
  capCollectionElement attributes ;
  removeLastObject (attributes, inCompiler COMMA_THERE) ;
  cCollectionElement_clusterList * p = (cCollectionElement_clusterList *) attributes.ptr () ;
  if (NULL == p) {
    outOperand0.drop () ;
  }else{
    macroValidSharedObject (p, cCollectionElement_clusterList) ;
    outOperand0 = p->mObject.mAttribute_mBlockList ;
  }
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::method_first (GALGAS_ipic_31__38_BlockList & outOperand0,
                                       C_Compiler * inCompiler
                                       COMMA_LOCATION_ARGS) const {
  capCollectionElement attributes ;
  readFirst (attributes, inCompiler COMMA_THERE) ;
  cCollectionElement_clusterList * p = (cCollectionElement_clusterList *) attributes.ptr () ;
  if (NULL == p) {
    outOperand0.drop () ;
  }else{
    macroValidSharedObject (p, cCollectionElement_clusterList) ;
    outOperand0 = p->mObject.mAttribute_mBlockList ;
  }
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::method_last (GALGAS_ipic_31__38_BlockList & outOperand0,
                                      C_Compiler * inCompiler
                                      COMMA_LOCATION_ARGS) const {
  capCollectionElement attributes ;
  readLast (attributes, inCompiler COMMA_THERE) ;
  cCollectionElement_clusterList * p = (cCollectionElement_clusterList *) attributes.ptr () ;
  if (NULL == p) {
    outOperand0.drop () ;
  }else{
    macroValidSharedObject (p, cCollectionElement_clusterList) ;
    outOperand0 = p->mObject.mAttribute_mBlockList ;
  }
}

//---------------------------------------------------------------------------*

GALGAS_clusterList GALGAS_clusterList::operator_concat (const GALGAS_clusterList & inOperand
                                                        COMMA_UNUSED_LOCATION_ARGS) const {
  GALGAS_clusterList result ;
  if (isValid () && inOperand.isValid ()) {
    result = *this ;
    result.appendList (inOperand) ;
  }
  return result ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList GALGAS_clusterList::reader_subListWithRange (const GALGAS_range & inRange,
                                                                C_Compiler * inCompiler
                                                                COMMA_LOCATION_ARGS) const {
  GALGAS_clusterList result = GALGAS_clusterList::constructor_emptyList (THERE) ;
  subListWithRange (result, inRange, inCompiler COMMA_THERE) ;
  return result ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList GALGAS_clusterList::reader_subListFromIndex (const GALGAS_uint & inIndex,
                                                                C_Compiler * inCompiler
                                                                COMMA_LOCATION_ARGS) const {
  GALGAS_clusterList result = GALGAS_clusterList::constructor_emptyList (THERE) ;
  subListFromIndex (result, inIndex, inCompiler COMMA_THERE) ;
  return result ;
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList::dotAssign_operation (const GALGAS_clusterList inOperand
                                              COMMA_UNUSED_LOCATION_ARGS) {
  appendList (inOperand) ;
}

//---------------------------------------------------------------------------*

GALGAS_ipic_31__38_BlockList GALGAS_clusterList::reader_mBlockListAtIndex (const GALGAS_uint & inIndex,
                                                                           C_Compiler * inCompiler
                                                                           COMMA_LOCATION_ARGS) const {
  capCollectionElement attributes = readObjectAtIndex (inIndex, inCompiler COMMA_THERE) ;
  cCollectionElement_clusterList * p = (cCollectionElement_clusterList *) attributes.ptr () ;
  GALGAS_ipic_31__38_BlockList result ;
  if (NULL != p) {
    macroValidSharedObject (p, cCollectionElement_clusterList) ;
    result = p->mObject.mAttribute_mBlockList ;
  }
  return result ;
}



//---------------------------------------------------------------------------*

cEnumerator_clusterList::cEnumerator_clusterList (const GALGAS_clusterList & inEnumeratedObject,
                                                  const typeEnumerationOrder inOrder) :
cGenericAbstractEnumerator () {
  inEnumeratedObject.populateEnumerationArray (mEnumerationArray, inOrder) ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList_2E_element cEnumerator_clusterList::current (LOCATION_ARGS) const {
  const cCollectionElement_clusterList * p = (const cCollectionElement_clusterList *) currentObjectPtr (THERE) ;
  macroValidSharedObject (p, const cCollectionElement_clusterList) ;
  return p->mObject ;
}


//---------------------------------------------------------------------------*

GALGAS_ipic_31__38_BlockList cEnumerator_clusterList::current_mBlockList (LOCATION_ARGS) const {
  const cCollectionElement_clusterList * p = (const cCollectionElement_clusterList *) currentObjectPtr (THERE) ;
  macroValidSharedObject (p, const cCollectionElement_clusterList) ;
  return p->mObject.mAttribute_mBlockList ;
}




//---------------------------------------------------------------------------*
//                                                                           *
//                             @clusterList type                             *
//                                                                           *
//---------------------------------------------------------------------------*

const C_galgas_type_descriptor
kTypeDescriptor_GALGAS_clusterList ("clusterList",
                                    NULL) ;

//---------------------------------------------------------------------------*

const C_galgas_type_descriptor * GALGAS_clusterList::staticTypeDescriptor (void) const {
  return & kTypeDescriptor_GALGAS_clusterList ;
}

//---------------------------------------------------------------------------*

AC_GALGAS_root * GALGAS_clusterList::clonedObject (void) const {
  AC_GALGAS_root * result = NULL ;
  if (isValid ()) {
    macroMyNew (result, GALGAS_clusterList (*this)) ;
  }
  return result ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList GALGAS_clusterList::extractObject (const GALGAS_object & inObject,
                                                      C_Compiler * inCompiler
                                                      COMMA_LOCATION_ARGS) {
  GALGAS_clusterList result ;
  const GALGAS_clusterList * p = (const GALGAS_clusterList *) inObject.embeddedObject () ;
  if (NULL != p) {
    if (NULL != dynamic_cast <const GALGAS_clusterList *> (p)) {
      result = *p ;
    }else{
      inCompiler->castError ("clusterList", p->dynamicTypeDescriptor () COMMA_THERE) ;
    }  
  }
  return result ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//                    Routine 'perform_cluster_ordering'                     *
//                                                                           *
//---------------------------------------------------------------------------*

void routine_perform_5F_cluster_5F_ordering (const GALGAS_clusterList constinArgument_inInitialClusterList,
                                             GALGAS_ipic_31__38_BlockList & ioArgument_ioBlockList,
                                             GALGAS_string & ioArgument_ioListFileContents,
                                             C_Compiler * inCompiler
                                             COMMA_UNUSED_LOCATION_ARGS) {
  GALGAS_uint var_clusterCount = constinArgument_inInitialClusterList.reader_length (SOURCE_FILE_AT_LINE (18)) ;
  ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string::makeEmptyString ().reader_stringByLeftAndRightPadding (GALGAS_uint ((PMUInt32) 79U), GALGAS_char (TO_UNICODE (42)) COMMA_SOURCE_FILE_AT_LINE (19)).operator_concat (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (19)) COMMA_SOURCE_FILE_AT_LINE (19)) ;
  ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("*").operator_concat (GALGAS_string ("CLUSTER ORDERING OPTIMIZATION").reader_stringByLeftAndRightPadding (GALGAS_uint ((PMUInt32) 77U), GALGAS_char (TO_UNICODE (32)) COMMA_SOURCE_FILE_AT_LINE (20)) COMMA_SOURCE_FILE_AT_LINE (20)).operator_concat (GALGAS_string ("*\n") COMMA_SOURCE_FILE_AT_LINE (20)) COMMA_SOURCE_FILE_AT_LINE (20)) ;
  ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string::makeEmptyString ().reader_stringByLeftAndRightPadding (GALGAS_uint ((PMUInt32) 79U), GALGAS_char (TO_UNICODE (42)) COMMA_SOURCE_FILE_AT_LINE (21)).operator_concat (GALGAS_string ("\n"
    "\n") COMMA_SOURCE_FILE_AT_LINE (21)) COMMA_SOURCE_FILE_AT_LINE (21)) ;
  //--- @ifExpressionForGeneration
  GALGAS_string temp_0 ;
  const enumGalgasBool test_1 = GALGAS_bool (kIsStrictSup, var_clusterCount.objectCompare (GALGAS_uint ((PMUInt32) 1U))).boolEnum () ;
  if (kBoolTrue == test_1) {
    temp_0 = GALGAS_string ("s") ;
  }else if (kBoolFalse == test_1) {
    temp_0 = GALGAS_string::makeEmptyString () ;
  }
  GALGAS_string var_s = GALGAS_string ("Cluster ordering optimization (").operator_concat (var_clusterCount.reader_string (SOURCE_FILE_AT_LINE (22)) COMMA_SOURCE_FILE_AT_LINE (22)).operator_concat (GALGAS_string (" cluster") COMMA_SOURCE_FILE_AT_LINE (22)).operator_concat (temp_0 COMMA_SOURCE_FILE_AT_LINE (22)).operator_concat (GALGAS_string ("):\n") COMMA_SOURCE_FILE_AT_LINE (22)) ;
  ioArgument_ioListFileContents.dotAssign_operation (var_s.operator_concat (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (23)) COMMA_SOURCE_FILE_AT_LINE (23)) ;
  const enumGalgasBool test_2 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
  if (kBoolTrue == test_2) {
    inCompiler->printMessage (var_s COMMA_SOURCE_FILE_AT_LINE (26)) ;
  }
  GALGAS_clusterList var_clusterList = constinArgument_inInitialClusterList ;
  GALGAS_bool var_continue = GALGAS_bool (true) ;
  GALGAS_uint var_pass = GALGAS_uint ((PMUInt32) 0U) ;
  if (var_clusterList.reader_length (SOURCE_FILE_AT_LINE (32)).add_operation (GALGAS_uint ((PMUInt32) 1U), inCompiler COMMA_SOURCE_FILE_AT_LINE (32)).isValid ()) {
    PMUInt32 variant_1199 = var_clusterList.reader_length (SOURCE_FILE_AT_LINE (32)).add_operation (GALGAS_uint ((PMUInt32) 1U), inCompiler COMMA_SOURCE_FILE_AT_LINE (32)).uintValue () ;
    bool loop_1199 = true ;
    while (loop_1199) {
      loop_1199 = var_continue.isValid () ;
      if (loop_1199) {
        loop_1199 = var_continue.boolValue () ;
      }
      if (loop_1199 && (0 == variant_1199)) {
        loop_1199 = false ;
        inCompiler->loopRunTimeVariantError (SOURCE_FILE_AT_LINE (32)) ;
      }
      if (loop_1199) {
        variant_1199 -- ;
        var_pass.increment_operation (inCompiler COMMA_SOURCE_FILE_AT_LINE (34)) ;
        ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("Pass ").operator_concat (var_pass.reader_string (SOURCE_FILE_AT_LINE (35)) COMMA_SOURCE_FILE_AT_LINE (35)).operator_concat (GALGAS_string (":\n") COMMA_SOURCE_FILE_AT_LINE (35)) COMMA_SOURCE_FILE_AT_LINE (35)) ;
        GALGAS_ipic_31__38_BlockList var_workingBlockList = GALGAS_ipic_31__38_BlockList::constructor_emptyList (SOURCE_FILE_AT_LINE (37)) ;
        GALGAS_symbolTableForClusterOrdering var_symbolTable = GALGAS_symbolTableForClusterOrdering::constructor_emptyMap (SOURCE_FILE_AT_LINE (38)) ;
        cEnumerator_clusterList enumerator_1500 (var_clusterList, kEnumeration_up) ;
        GALGAS_uint index_1494 ((PMUInt32) 0) ;
        while (enumerator_1500.hasCurrentObject ()) {
          var_workingBlockList.dotAssign_operation (enumerator_1500.current_mBlockList (HERE) COMMA_SOURCE_FILE_AT_LINE (40)) ;
          cEnumerator_ipic_31__38_BlockList enumerator_1583 (enumerator_1500.current_mBlockList (HERE), kEnumeration_up) ;
          while (enumerator_1583.hasCurrentObject ()) {
            {
            var_symbolTable.modifier_insertKey (enumerator_1583.current_mBlock (HERE).mAttribute_mLabel, index_1494, inCompiler COMMA_SOURCE_FILE_AT_LINE (42)) ;
            }
            enumerator_1583.gotoNextObject () ;
          }
          enumerator_1500.gotoNextObject () ;
          index_1494.increment_operation (inCompiler COMMA_SOURCE_FILE_AT_LINE (39)) ;
        }
        GALGAS_uint var_insertionIdx = var_workingBlockList.reader_length (SOURCE_FILE_AT_LINE (46)) ;
        cEnumerator_ipic_31__38_BlockList enumerator_1831 (ioArgument_ioBlockList, kEnumeration_down) ;
        bool bool_3 = var_continue.isValidAndTrue () ;
        if (enumerator_1831.hasCurrentObject () && bool_3) {
          while (enumerator_1831.hasCurrentObject () && bool_3) {
            var_continue = GALGAS_bool (kIsNotEqual, enumerator_1831.current_mBlock (HERE).mAttribute_mStartAddress.objectCompare (GALGAS_uint::constructor_max (SOURCE_FILE_AT_LINE (48)))) ;
            const enumGalgasBool test_4 = var_continue.boolEnum () ;
            if (kBoolTrue == test_4) {
              {
              var_symbolTable.modifier_insertKey (enumerator_1831.current_mBlock (HERE).mAttribute_mLabel, GALGAS_uint::constructor_max (SOURCE_FILE_AT_LINE (50)), inCompiler COMMA_SOURCE_FILE_AT_LINE (50)) ;
              }
              {
              var_workingBlockList.modifier_insertAtIndex (enumerator_1831.current_mBlock (HERE), var_insertionIdx, inCompiler COMMA_SOURCE_FILE_AT_LINE (51)) ;
              }
            }
            enumerator_1831.gotoNextObject () ;
            if (enumerator_1831.hasCurrentObject ()) {
              bool_3 = var_continue.isValidAndTrue () ;
            }
          }
        }
        GALGAS_branchOverflowMap var_overflowMap ;
        {
        routine_ipic_31__38_RelativeBranchOverflow (var_workingBlockList, var_overflowMap, inCompiler COMMA_SOURCE_FILE_AT_LINE (55)) ;
        }
        GALGAS_uint var_overflowCount = GALGAS_uint ((PMUInt32) 0U) ;
        cEnumerator_branchOverflowMap enumerator_2276 (var_overflowMap, kEnumeration_up) ;
        while (enumerator_2276.hasCurrentObject ()) {
          cEnumerator_stringlist enumerator_2299 (enumerator_2276.current_mList (HERE), kEnumeration_up) ;
          while (enumerator_2299.hasCurrentObject ()) {
            var_overflowCount.increment_operation (inCompiler COMMA_SOURCE_FILE_AT_LINE (62)) ;
            GALGAS_uint var_sourceCluster ;
            var_symbolTable.method_searchKey (enumerator_2276.current_key (HERE).reader_nowhere (SOURCE_FILE_AT_LINE (63)), var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (63)) ;
            GALGAS_uint var_targetCluster ;
            var_symbolTable.method_searchKey (enumerator_2299.current_mValue (HERE).reader_nowhere (SOURCE_FILE_AT_LINE (64)), var_targetCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (64)) ;
            ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("  ").operator_concat (enumerator_2276.current_key (HERE) COMMA_SOURCE_FILE_AT_LINE (65)).operator_concat (GALGAS_string (" (cluster #") COMMA_SOURCE_FILE_AT_LINE (65)).operator_concat (var_sourceCluster.reader_string (SOURCE_FILE_AT_LINE (65)) COMMA_SOURCE_FILE_AT_LINE (65)).operator_concat (GALGAS_string (") --> ") COMMA_SOURCE_FILE_AT_LINE (65)).operator_concat (enumerator_2299.current_mValue (HERE) COMMA_SOURCE_FILE_AT_LINE (65)).operator_concat (GALGAS_string (" (cluster #") COMMA_SOURCE_FILE_AT_LINE (65)).operator_concat (var_targetCluster.reader_string (SOURCE_FILE_AT_LINE (65)) COMMA_SOURCE_FILE_AT_LINE (65)).operator_concat (GALGAS_string (")\n") COMMA_SOURCE_FILE_AT_LINE (65)) COMMA_SOURCE_FILE_AT_LINE (65)) ;
            enumerator_2299.gotoNextObject () ;
          }
          enumerator_2276.gotoNextObject () ;
        }
        const enumGalgasBool test_5 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
        if (kBoolTrue == test_5) {
          GALGAS_string var_s = GALGAS_string ("  Pass ").operator_concat (var_pass.reader_string (SOURCE_FILE_AT_LINE (69)) COMMA_SOURCE_FILE_AT_LINE (69)).operator_concat (GALGAS_string (": ") COMMA_SOURCE_FILE_AT_LINE (69)) ;
          const enumGalgasBool test_6 = GALGAS_bool (kIsEqual, var_overflowCount.objectCompare (GALGAS_uint ((PMUInt32) 0U))).boolEnum () ;
          if (kBoolTrue == test_6) {
            var_s.dotAssign_operation (GALGAS_string ("no branch overflow") COMMA_SOURCE_FILE_AT_LINE (71)) ;
          }else if (kBoolFalse == test_6) {
            const enumGalgasBool test_7 = GALGAS_bool (kIsEqual, var_overflowCount.objectCompare (GALGAS_uint ((PMUInt32) 1U))).boolEnum () ;
            if (kBoolTrue == test_7) {
              var_s.dotAssign_operation (GALGAS_string ("1 branch overflow") COMMA_SOURCE_FILE_AT_LINE (73)) ;
            }else if (kBoolFalse == test_7) {
              var_s.dotAssign_operation (var_overflowCount.reader_string (SOURCE_FILE_AT_LINE (75)).operator_concat (GALGAS_string (" branch overflows") COMMA_SOURCE_FILE_AT_LINE (75)) COMMA_SOURCE_FILE_AT_LINE (75)) ;
            }
          }
          inCompiler->printMessage (var_s COMMA_SOURCE_FILE_AT_LINE (77)) ;
        }
        GALGAS_bool var_correctionLoop = GALGAS_bool (true) ;
        cEnumerator_branchOverflowMap enumerator_3071 (var_overflowMap, kEnumeration_up) ;
        bool bool_8 = var_correctionLoop.isValidAndTrue () ;
        if (enumerator_3071.hasCurrentObject () && bool_8) {
          while (enumerator_3071.hasCurrentObject () && bool_8) {
            cEnumerator_stringlist enumerator_3115 (enumerator_3071.current_mList (HERE), kEnumeration_up) ;
            bool bool_9 = var_correctionLoop.isValidAndTrue () ;
            if (enumerator_3115.hasCurrentObject () && bool_9) {
              while (enumerator_3115.hasCurrentObject () && bool_9) {
                GALGAS_uint var_targetCluster ;
                var_symbolTable.method_searchKey (enumerator_3115.current_mValue (HERE).reader_nowhere (SOURCE_FILE_AT_LINE (83)), var_targetCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (83)) ;
                const enumGalgasBool test_10 = GALGAS_bool (kIsNotEqual, var_targetCluster.objectCompare (GALGAS_uint::constructor_max (SOURCE_FILE_AT_LINE (84)))).boolEnum () ;
                if (kBoolTrue == test_10) {
                  GALGAS_uint var_sourceCluster ;
                  var_symbolTable.method_searchKey (enumerator_3071.current_key (HERE).reader_nowhere (SOURCE_FILE_AT_LINE (85)), var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (85)) ;
                  const enumGalgasBool test_11 = GALGAS_bool (kIsEqual, var_sourceCluster.add_operation (GALGAS_uint ((PMUInt32) 1U), inCompiler COMMA_SOURCE_FILE_AT_LINE (86)).objectCompare (var_targetCluster)).boolEnum () ;
                  if (kBoolTrue == test_11) {
                    var_correctionLoop = GALGAS_bool (false) ;
                    var_continue = GALGAS_bool (true) ;
                    GALGAS_ipic_31__38_BlockList var_last ;
                    {
                    var_clusterList.modifier_removeAtIndex (var_last, var_targetCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (89)) ;
                    }
                    GALGAS_ipic_31__38_BlockList var_first ;
                    {
                    var_clusterList.modifier_removeAtIndex (var_first, var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (90)) ;
                    }
                    {
                    var_clusterList.modifier_insertAtIndex (var_first.operator_concat (var_last COMMA_SOURCE_FILE_AT_LINE (91)), var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (91)) ;
                    }
                    GALGAS_string var_m = GALGAS_string ("merge #").operator_concat (var_targetCluster.reader_string (SOURCE_FILE_AT_LINE (92)) COMMA_SOURCE_FILE_AT_LINE (92)).operator_concat (GALGAS_string (" into #") COMMA_SOURCE_FILE_AT_LINE (92)).operator_concat (var_sourceCluster.reader_string (SOURCE_FILE_AT_LINE (92)) COMMA_SOURCE_FILE_AT_LINE (92)).operator_concat (GALGAS_string ("]") COMMA_SOURCE_FILE_AT_LINE (92)) ;
                    ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("  --> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (93)).operator_concat (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (93)) COMMA_SOURCE_FILE_AT_LINE (93)) ;
                    const enumGalgasBool test_12 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
                    if (kBoolTrue == test_12) {
                      inCompiler->printMessage (GALGAS_string (" -> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (95)) COMMA_SOURCE_FILE_AT_LINE (95)) ;
                    }
                  }else if (kBoolFalse == test_11) {
                    const enumGalgasBool test_13 = GALGAS_bool (kIsEqual, var_sourceCluster.objectCompare (var_targetCluster.add_operation (GALGAS_uint ((PMUInt32) 1U), inCompiler COMMA_SOURCE_FILE_AT_LINE (97)))).boolEnum () ;
                    if (kBoolTrue == test_13) {
                      var_correctionLoop = GALGAS_bool (false) ;
                      var_continue = GALGAS_bool (true) ;
                      GALGAS_ipic_31__38_BlockList var_last ;
                      {
                      var_clusterList.modifier_removeAtIndex (var_last, var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (100)) ;
                      }
                      GALGAS_ipic_31__38_BlockList var_first ;
                      {
                      var_clusterList.modifier_removeAtIndex (var_first, var_targetCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (101)) ;
                      }
                      {
                      var_clusterList.modifier_insertAtIndex (var_first.operator_concat (var_last COMMA_SOURCE_FILE_AT_LINE (102)), var_targetCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (102)) ;
                      }
                      GALGAS_string var_m = GALGAS_string ("merge #").operator_concat (var_sourceCluster.reader_string (SOURCE_FILE_AT_LINE (103)) COMMA_SOURCE_FILE_AT_LINE (103)).operator_concat (GALGAS_string (" into #") COMMA_SOURCE_FILE_AT_LINE (103)).operator_concat (var_targetCluster.reader_string (SOURCE_FILE_AT_LINE (103)) COMMA_SOURCE_FILE_AT_LINE (103)).operator_concat (GALGAS_string ("]") COMMA_SOURCE_FILE_AT_LINE (103)) ;
                      ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("  --> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (104)).operator_concat (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (104)) COMMA_SOURCE_FILE_AT_LINE (104)) ;
                      const enumGalgasBool test_14 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
                      if (kBoolTrue == test_14) {
                        inCompiler->printMessage (GALGAS_string (" -> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (106)) COMMA_SOURCE_FILE_AT_LINE (106)) ;
                      }
                    }else if (kBoolFalse == test_13) {
                      const enumGalgasBool test_15 = GALGAS_bool (kIsStrictInf, var_sourceCluster.objectCompare (var_targetCluster)).boolEnum () ;
                      if (kBoolTrue == test_15) {
                        var_correctionLoop = GALGAS_bool (false) ;
                        var_continue = GALGAS_bool (true) ;
                        GALGAS_ipic_31__38_BlockList var_b ;
                        {
                        var_clusterList.modifier_removeAtIndex (var_b, var_targetCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (111)) ;
                        }
                        {
                        var_clusterList.modifier_insertAtIndex (var_b, var_targetCluster.add_operation (var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (112)).divide_operation (GALGAS_uint ((PMUInt32) 2U), inCompiler COMMA_SOURCE_FILE_AT_LINE (112)), inCompiler COMMA_SOURCE_FILE_AT_LINE (112)) ;
                        }
                        GALGAS_string var_m = GALGAS_string ("roll up [#").operator_concat (var_targetCluster.add_operation (var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (113)).divide_operation (GALGAS_uint ((PMUInt32) 2U), inCompiler COMMA_SOURCE_FILE_AT_LINE (113)).reader_string (SOURCE_FILE_AT_LINE (113)) COMMA_SOURCE_FILE_AT_LINE (113)).operator_concat (GALGAS_string (", #") COMMA_SOURCE_FILE_AT_LINE (113)).operator_concat (var_targetCluster.reader_string (SOURCE_FILE_AT_LINE (113)) COMMA_SOURCE_FILE_AT_LINE (113)).operator_concat (GALGAS_string ("]") COMMA_SOURCE_FILE_AT_LINE (113)) ;
                        ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("  --> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (114)).operator_concat (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (114)) COMMA_SOURCE_FILE_AT_LINE (114)) ;
                        const enumGalgasBool test_16 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
                        if (kBoolTrue == test_16) {
                          inCompiler->printMessage (GALGAS_string (" -> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (116)) COMMA_SOURCE_FILE_AT_LINE (116)) ;
                        }
                      }else if (kBoolFalse == test_15) {
                        const enumGalgasBool test_17 = GALGAS_bool (kIsStrictSup, var_sourceCluster.objectCompare (var_targetCluster)).boolEnum () ;
                        if (kBoolTrue == test_17) {
                          var_correctionLoop = GALGAS_bool (false) ;
                          var_continue = GALGAS_bool (true) ;
                          GALGAS_ipic_31__38_BlockList var_b ;
                          {
                          var_clusterList.modifier_removeAtIndex (var_b, var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (121)) ;
                          }
                          {
                          var_clusterList.modifier_insertAtIndex (var_b, var_targetCluster.add_operation (var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (122)).divide_operation (GALGAS_uint ((PMUInt32) 2U), inCompiler COMMA_SOURCE_FILE_AT_LINE (122)), inCompiler COMMA_SOURCE_FILE_AT_LINE (122)) ;
                          }
                          GALGAS_string var_m = GALGAS_string ("roll up [#").operator_concat (var_targetCluster.reader_string (SOURCE_FILE_AT_LINE (123)) COMMA_SOURCE_FILE_AT_LINE (123)).operator_concat (GALGAS_string (", #") COMMA_SOURCE_FILE_AT_LINE (123)).operator_concat (var_targetCluster.add_operation (var_sourceCluster, inCompiler COMMA_SOURCE_FILE_AT_LINE (123)).divide_operation (GALGAS_uint ((PMUInt32) 2U), inCompiler COMMA_SOURCE_FILE_AT_LINE (123)).reader_string (SOURCE_FILE_AT_LINE (123)) COMMA_SOURCE_FILE_AT_LINE (123)).operator_concat (GALGAS_string ("]") COMMA_SOURCE_FILE_AT_LINE (123)) ;
                          ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("  --> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (124)).operator_concat (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (124)) COMMA_SOURCE_FILE_AT_LINE (124)) ;
                          const enumGalgasBool test_18 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
                          if (kBoolTrue == test_18) {
                            inCompiler->printMessage (GALGAS_string (" -> ").operator_concat (var_m COMMA_SOURCE_FILE_AT_LINE (126)) COMMA_SOURCE_FILE_AT_LINE (126)) ;
                          }
                        }
                      }
                    }
                  }
                }
                enumerator_3115.gotoNextObject () ;
                if (enumerator_3115.hasCurrentObject ()) {
                  bool_9 = var_correctionLoop.isValidAndTrue () ;
                }
              }
            }
            enumerator_3071.gotoNextObject () ;
            if (enumerator_3071.hasCurrentObject ()) {
              bool_8 = var_correctionLoop.isValidAndTrue () ;
            }
          }
        }
        const enumGalgasBool test_19 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
        if (kBoolTrue == test_19) {
          inCompiler->printMessage (GALGAS_string (".\n") COMMA_SOURCE_FILE_AT_LINE (133)) ;
        }
      }
    }
  }
  const enumGalgasBool test_20 = GALGAS_bool (gOption_galgas_5F_builtin_5F_options_verbose_5F_output.reader_value ()).boolEnum () ;
  if (kBoolTrue == test_20) {
    inCompiler->printMessage (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (137)) ;
  }
  ioArgument_ioListFileContents.dotAssign_operation (GALGAS_string ("\n") COMMA_SOURCE_FILE_AT_LINE (139)) ;
  GALGAS_ipic_31__38_BlockList var_newBlockList = GALGAS_ipic_31__38_BlockList::constructor_emptyList (SOURCE_FILE_AT_LINE (141)) ;
  var_continue = GALGAS_bool (true) ;
  cEnumerator_ipic_31__38_BlockList enumerator_6167 (ioArgument_ioBlockList, kEnumeration_up) ;
  bool bool_21 = var_continue.isValidAndTrue () ;
  if (enumerator_6167.hasCurrentObject () && bool_21) {
    while (enumerator_6167.hasCurrentObject () && bool_21) {
      var_continue = GALGAS_bool (kIsNotEqual, enumerator_6167.current_mBlock (HERE).mAttribute_mStartAddress.objectCompare (GALGAS_uint::constructor_max (SOURCE_FILE_AT_LINE (145)))) ;
      const enumGalgasBool test_22 = var_continue.boolEnum () ;
      if (kBoolTrue == test_22) {
        var_newBlockList.addAssign_operation (enumerator_6167.current_mBlock (HERE) COMMA_SOURCE_FILE_AT_LINE (147)) ;
      }
      enumerator_6167.gotoNextObject () ;
      if (enumerator_6167.hasCurrentObject ()) {
        bool_21 = var_continue.isValidAndTrue () ;
      }
    }
  }
  cEnumerator_clusterList enumerator_6369 (var_clusterList, kEnumeration_up) ;
  while (enumerator_6369.hasCurrentObject ()) {
    var_newBlockList.dotAssign_operation (enumerator_6369.current_mBlockList (HERE) COMMA_SOURCE_FILE_AT_LINE (152)) ;
    enumerator_6369.gotoNextObject () ;
  }
  GALGAS_uint var_insertionIndex = var_newBlockList.reader_length (SOURCE_FILE_AT_LINE (155)) ;
  var_continue = GALGAS_bool (true) ;
  cEnumerator_ipic_31__38_BlockList enumerator_6570 (ioArgument_ioBlockList, kEnumeration_down) ;
  bool bool_23 = var_continue.isValidAndTrue () ;
  if (enumerator_6570.hasCurrentObject () && bool_23) {
    while (enumerator_6570.hasCurrentObject () && bool_23) {
      var_continue = GALGAS_bool (kIsNotEqual, enumerator_6570.current_mBlock (HERE).mAttribute_mStartAddress.objectCompare (GALGAS_uint::constructor_max (SOURCE_FILE_AT_LINE (158)))) ;
      const enumGalgasBool test_24 = var_continue.boolEnum () ;
      if (kBoolTrue == test_24) {
        {
        var_newBlockList.modifier_insertAtIndex (enumerator_6570.current_mBlock (HERE), var_insertionIndex, inCompiler COMMA_SOURCE_FILE_AT_LINE (160)) ;
        }
      }
      enumerator_6570.gotoNextObject () ;
      if (enumerator_6570.hasCurrentObject ()) {
        bool_23 = var_continue.isValidAndTrue () ;
      }
    }
  }
  ioArgument_ioBlockList = var_newBlockList ;
}


//---------------------------------------------------------------------------*

GALGAS_clusterList_2E_element::GALGAS_clusterList_2E_element (void) :
mAttribute_mBlockList () {
}

//---------------------------------------------------------------------------*

GALGAS_clusterList_2E_element::~ GALGAS_clusterList_2E_element (void) {
}

//---------------------------------------------------------------------------*

GALGAS_clusterList_2E_element::GALGAS_clusterList_2E_element (const GALGAS_ipic_31__38_BlockList & inOperand0) :
mAttribute_mBlockList (inOperand0) {
}

//---------------------------------------------------------------------------*

GALGAS_clusterList_2E_element GALGAS_clusterList_2E_element::constructor_default (UNUSED_LOCATION_ARGS) {
  return GALGAS_clusterList_2E_element (GALGAS_ipic_31__38_BlockList::constructor_emptyList (HERE)) ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList_2E_element GALGAS_clusterList_2E_element::constructor_new (const GALGAS_ipic_31__38_BlockList & inOperand0 
                                                                              COMMA_UNUSED_LOCATION_ARGS) {
  GALGAS_clusterList_2E_element result ;
  if (inOperand0.isValid ()) {
    result = GALGAS_clusterList_2E_element (inOperand0) ;
  }
  return result ;
}

//---------------------------------------------------------------------------*

typeComparisonResult GALGAS_clusterList_2E_element::objectCompare (const GALGAS_clusterList_2E_element & inOperand) const {
   typeComparisonResult result = kOperandEqual ;
  if (result == kOperandEqual) {
    result = mAttribute_mBlockList.objectCompare (inOperand.mAttribute_mBlockList) ;
  }
  return result ;
}

//---------------------------------------------------------------------------*

bool GALGAS_clusterList_2E_element::isValid (void) const {
  return mAttribute_mBlockList.isValid () ;
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList_2E_element::drop (void) {
  mAttribute_mBlockList.drop () ;
}

//---------------------------------------------------------------------------*

void GALGAS_clusterList_2E_element::description (C_String & ioString,
                                                 const PMSInt32 inIndentation) const {
  ioString << "<struct @clusterList.element:" ;
  if (! isValid ()) {
    ioString << " not built" ;
  }else{
    mAttribute_mBlockList.description (ioString, inIndentation+1) ;
  }
  ioString << ">" ;
}

//---------------------------------------------------------------------------*

GALGAS_ipic_31__38_BlockList GALGAS_clusterList_2E_element::reader_mBlockList (UNUSED_LOCATION_ARGS) const {
  return mAttribute_mBlockList ;
}



//---------------------------------------------------------------------------*
//                                                                           *
//                         @clusterList.element type                         *
//                                                                           *
//---------------------------------------------------------------------------*

const C_galgas_type_descriptor
kTypeDescriptor_GALGAS_clusterList_2E_element ("clusterList.element",
                                               NULL) ;

//---------------------------------------------------------------------------*

const C_galgas_type_descriptor * GALGAS_clusterList_2E_element::staticTypeDescriptor (void) const {
  return & kTypeDescriptor_GALGAS_clusterList_2E_element ;
}

//---------------------------------------------------------------------------*

AC_GALGAS_root * GALGAS_clusterList_2E_element::clonedObject (void) const {
  AC_GALGAS_root * result = NULL ;
  if (isValid ()) {
    macroMyNew (result, GALGAS_clusterList_2E_element (*this)) ;
  }
  return result ;
}

//---------------------------------------------------------------------------*

GALGAS_clusterList_2E_element GALGAS_clusterList_2E_element::extractObject (const GALGAS_object & inObject,
                                                                            C_Compiler * inCompiler
                                                                            COMMA_LOCATION_ARGS) {
  GALGAS_clusterList_2E_element result ;
  const GALGAS_clusterList_2E_element * p = (const GALGAS_clusterList_2E_element *) inObject.embeddedObject () ;
  if (NULL != p) {
    if (NULL != dynamic_cast <const GALGAS_clusterList_2E_element *> (p)) {
      result = *p ;
    }else{
      inCompiler->castError ("clusterList.element", p->dynamicTypeDescriptor () COMMA_THERE) ;
    }  
  }
  return result ;
}

//--- START OF USER ZONE 2


//--- END OF USER ZONE 2


