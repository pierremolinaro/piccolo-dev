//---------------------------------------------------------------------------*
//                                                                           *
//                     File 'piccoloDevice_syntax.cpp'                       *
//                 Generated by version GALGAS_BETA_VERSION                  *
//                    september 23th, 2010, at 16h3'52"                      *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

//---------------------------------------------------------------------------*

#include "version_libpm.h"
#if CURRENT_LIBPM_VERSION != VERSION_OF_LIBPM_USED_BY_GALGAS_COMPILER
  #error "This file has been compiled with a version of GALGAS that uses libpm version VERSION_OF_LIBPM_USED_BY_GALGAS_COMPILER, different than the current version (CURRENT_LIBPM_VERSION) of libpm"
#endif

//---------------------------------------------------------------------------*

#include <typeinfo>
#include "utilities/MF_MemoryControl.h"
#include "files/C_TextFileWrite.h"
#include "galgas/C_galgas_CLI_Options.h"
#include "piccoloDevice_syntax.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "piccoloDevice_syntax.gSyntax", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2

//---------------------------------------------------------------------------*
//                                                                           *
//             Implementation of production rule 'start_symbol'              *
//                                                                           *
//---------------------------------------------------------------------------*

void piccoloDevice_syntax::rule_piccoloDevice_5F_syntax_start_5F_symbol_i0_ (C_Lexique_piccoloDevice_5F_lexique & inLexique,
                                GGS_piccoloDeviceModel &var_cas_outPiccoloDeviceModel) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_controller) COMMA_HERE) ;
  GGS_lstring  var_cas_deviceName ;
  inLexique.assignFromAttribute_tokenString (var_cas_deviceName) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_identifier) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__7B_) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_processor) COMMA_HERE) ;
  GGS_processorType var_cas_processorType ;
  GGS_lstring  var_cas_processorName ;
  inLexique.assignFromAttribute_tokenString (var_cas_processorName) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_string) COMMA_HERE) ;
  const GGS_bool cond_777 = (var_cas_processorName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (25))).operator_isEqual (GGS_string ("pic18_60")) ;
  if (cond_777.isBuiltAndTrue ()) {
    var_cas_processorType = GGS_processorType::constructor_pic18_60 (inLexique COMMA_SOURCE_FILE_AT_LINE (26)) ;
  }else if (cond_777.isBuiltAndFalse ()) {
    const GGS_bool cond_876 = (var_cas_processorName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (27))).operator_isEqual (GGS_string ("pic18_80")) ;
    if (cond_876.isBuiltAndTrue ()) {
      var_cas_processorType = GGS_processorType::constructor_pic18_80 (inLexique COMMA_SOURCE_FILE_AT_LINE (28)) ;
    }else if (cond_876.isBuiltAndFalse ()) {
      const GGS_bool cond_976 = (var_cas_processorName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (29))).operator_isEqual (GGS_string ("mid-range")) ;
      if (cond_976.isBuiltAndTrue ()) {
        var_cas_processorType = GGS_processorType::constructor_midrange (inLexique COMMA_SOURCE_FILE_AT_LINE (30)) ;
      }else if (cond_976.isBuiltAndFalse ()) {
        const GGS_bool cond_1074 = (var_cas_processorName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (31))).operator_isEqual (GGS_string ("baseline")) ;
        if (cond_1074.isBuiltAndTrue ()) {
          var_cas_processorType = GGS_processorType::constructor_baseline (inLexique COMMA_SOURCE_FILE_AT_LINE (32)) ;
        }else if (cond_1074.isBuiltAndFalse ()) {
          GGS_location (inLexique).reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, ((GGS_string ("The '")).operator_concat (var_cas_processorName)).operator_concat (GGS_string ("' processor is not handled")) COMMA_SOURCE_FILE_AT_LINE (35)) ;
          var_cas_processorType.drop () ;
        }
      }
    }
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3B_) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_romsize) COMMA_HERE) ;
  GGS_luint  var_cas_romSize ;
  inLexique.assignFromAttribute_uint_33__32_value (var_cas_romSize) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3B_) COMMA_HERE) ;
  GGS_uint  var_cas_eepromSize ;
  GGS_uint  var_cas_eepromAddress ;
  switch (select_piccoloDevice_5F_syntax_0 (inLexique)) {
    case 1 : {
      var_cas_eepromSize = GGS_uint (0U) ;
      var_cas_eepromAddress = GGS_uint (0U) ;
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_eepromsize) COMMA_HERE) ;
      GGS_luint  var_cas_l_eepromSize ;
      inLexique.assignFromAttribute_uint_33__32_value (var_cas_l_eepromSize) ;
      inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
      var_cas_eepromSize = var_cas_l_eepromSize.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (48)) ;
      inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_at) COMMA_HERE) ;
      GGS_luint  var_cas_l_eepromAddress ;
      inLexique.assignFromAttribute_uint_33__32_value (var_cas_l_eepromAddress) ;
      inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
      var_cas_eepromAddress = var_cas_l_eepromAddress.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (51)) ;
      inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3B_) COMMA_HERE) ;
      } break ;
    default :
      break ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_bank) COMMA_HERE) ;
  GGS_luint  var_cas_bankCount ;
  inLexique.assignFromAttribute_uint_33__32_value (var_cas_bankCount) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3B_) COMMA_HERE) ;
  { bool syntaxRepeat_1 = true ;
    while (syntaxRepeat_1) {
      switch (select_piccoloDevice_5F_syntax_1 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_unusedregister) COMMA_HERE) ;
          GGS_luint  var_cas_unusedRegisterStart ;
          inLexique.assignFromAttribute_uint_33__32_value (var_cas_unusedRegisterStart) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
          switch (select_piccoloDevice_5F_syntax_2 (inLexique)) {
            case 1 : {
              } break ;
            case 2 : {
              inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_to) COMMA_HERE) ;
              GGS_luint  var_cas_unusedRegisterEnd ;
              inLexique.assignFromAttribute_uint_33__32_value (var_cas_unusedRegisterEnd) ;
              inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
              } break ;
            default :
              break ;
          }
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3B_) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_1 = false ;
          break ;
      }
    }
  }
  GGS_ramBankTable  var_cas_ramBankTable = GGS_ramBankTable ::constructor_emptyMap (inLexique COMMA_SOURCE_FILE_AT_LINE (68)) ;
  { bool syntaxRepeat_3 = true ;
    while (syntaxRepeat_3) {
      switch (select_piccoloDevice_5F_syntax_3 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_ram) COMMA_HERE) ;
          GGS_lstring  var_cas_ramName ;
          inLexique.assignFromAttribute_tokenString (var_cas_ramName) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_identifier) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3A_) COMMA_HERE) ;
          GGS_luint  var_cas_ramStart ;
          inLexique.assignFromAttribute_uint_33__32_value (var_cas_ramStart) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_to) COMMA_HERE) ;
          GGS_luint  var_cas_ramEnd ;
          inLexique.assignFromAttribute_uint_33__32_value (var_cas_ramEnd) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
          GGS_uintlist  var_cas_mirrorOffsetList = GGS_uintlist ::constructor_emptyList () ;
          switch (select_piccoloDevice_5F_syntax_4 (inLexique)) {
            case 1 : {
              } break ;
            case 2 : {
              inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_mirrorat) COMMA_HERE) ;
              { bool syntaxRepeat_5 = true ;
                while (syntaxRepeat_5) {
                    GGS_luint  var_cas_mirrorStartAddress ;
                    inLexique.assignFromAttribute_uint_33__32_value (var_cas_mirrorStartAddress) ;
                    inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                    var_cas_mirrorOffsetList.addAssign_operation (var_cas_mirrorStartAddress.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (83)).substract_operation (inLexique, var_cas_ramStart.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (83)) COMMA_SOURCE_FILE_AT_LINE (83))) ;
                  switch (select_piccoloDevice_5F_syntax_5 (inLexique)) {
                    case 2 : {
                      inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__2C_) COMMA_HERE) ;
                      } break ;
                    default :
                      syntaxRepeat_5 = false ;
                      break ;
                  }
                }
              }
              } break ;
            default :
              break ;
          }
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3B_) COMMA_HERE) ;
          var_cas_ramBankTable.modifier_insertKey (inLexique, var_cas_ramName, var_cas_ramStart.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (91)), var_cas_ramStart.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (92)), var_cas_ramEnd.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (93)).add_operation (inLexique, GGS_uint (1U) COMMA_SOURCE_FILE_AT_LINE (93)), var_cas_mirrorOffsetList COMMA_SOURCE_FILE_AT_LINE (89)) ;
          } break ;
        default :
          syntaxRepeat_3 = false ;
          break ;
      }
    }
  }
  GGS_registerTable  var_cas_registerTable = GGS_registerTable ::constructor_emptyMap (inLexique COMMA_SOURCE_FILE_AT_LINE (97)) ;
  { bool syntaxRepeat_6 = true ;
    while (syntaxRepeat_6) {
      switch (select_piccoloDevice_5F_syntax_6 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_register) COMMA_HERE) ;
          GGS_lstring  var_cas_registerName ;
          inLexique.assignFromAttribute_tokenString (var_cas_registerName) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_identifier) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_at) COMMA_HERE) ;
          GGS_uintlist  var_cas_registerAddressList = GGS_uintlist ::constructor_emptyList () ;
          { bool syntaxRepeat_7 = true ;
            while (syntaxRepeat_7) {
                GGS_luint  var_cas_registerAddress ;
                inLexique.assignFromAttribute_uint_33__32_value (var_cas_registerAddress) ;
                inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                var_cas_registerAddressList.addAssign_operation (var_cas_registerAddress.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (106))) ;
              switch (select_piccoloDevice_5F_syntax_7 (inLexique)) {
                case 2 : {
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__2C_) COMMA_HERE) ;
                  } break ;
                default :
                  syntaxRepeat_7 = false ;
                  break ;
              }
            }
          }
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3C_) COMMA_HERE) ;
          GGS_uint  var_cas_sliceIndex = GGS_uint (8U) ;
          GGS_bitSliceTable  var_cas_bitSliceTable = GGS_bitSliceTable ::constructor_emptyMap (inLexique COMMA_SOURCE_FILE_AT_LINE (112)) ;
          GGS_string var_cas_bitDefinitionString = GGS_string (" <") ;
          { bool syntaxRepeat_8 = true ;
            while (syntaxRepeat_8) {
                switch (select_piccoloDevice_5F_syntax_9 (inLexique)) {
                  case 1 : {
                    GGS_uint  var_cas_sliceWidth = GGS_uint (0U) ;
                    { bool syntaxRepeat_10 = true ;
                      while (syntaxRepeat_10) {
                          GGS_uint  var_cas_sliceBase = var_cas_sliceIndex ;
                          GGS_lstring  var_cas_sliceName ;
                          inLexique.assignFromAttribute_tokenString (var_cas_sliceName) ;
                          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_identifier) COMMA_HERE) ;
                          switch (select_piccoloDevice_5F_syntax_11 (inLexique)) {
                            case 1 : {
                              const GGS_bool cond_3313 = ((var_cas_sliceWidth).operator_isNotEqual (GGS_uint (0U))).operator_and ((var_cas_sliceWidth).operator_isNotEqual (GGS_uint (1U))) ;
                              if (cond_3313.isBuiltAndTrue ()) {
                                var_cas_sliceName.reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, ((GGS_string ("a slice of 1 bit is expected for '")).operator_concat (var_cas_sliceName)).operator_concat (GGS_string ("'")) COMMA_SOURCE_FILE_AT_LINE (123)) ;
                              }
                              var_cas_sliceWidth = GGS_uint (1U) ;
                              var_cas_bitDefinitionString.dotAssign_operation (var_cas_sliceName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (125))) ;
                              } break ;
                            case 2 : {
                              inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__5B_) COMMA_HERE) ;
                              GGS_luint  var_cas_sliceSize ;
                              inLexique.assignFromAttribute_uint_33__32_value (var_cas_sliceSize) ;
                              inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                              const GGS_bool cond_3683 = ((var_cas_sliceWidth).operator_isNotEqual (GGS_uint (0U))).operator_and ((var_cas_sliceWidth).operator_isNotEqual (var_cas_sliceSize.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (129)))) ;
                              if (cond_3683.isBuiltAndTrue ()) {
                                var_cas_sliceName.reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, ((((GGS_string ("a slice of ")).operator_concat (var_cas_sliceWidth.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (130)))).operator_concat (GGS_string (" bits is expected for '"))).operator_concat (var_cas_sliceName)).operator_concat (GGS_string ("'")) COMMA_SOURCE_FILE_AT_LINE (131)) ;
                              }
                              var_cas_sliceWidth = var_cas_sliceSize.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (132)) ;
                              var_cas_sliceBase = var_cas_sliceBase.add_operation (inLexique, GGS_uint (1U) COMMA_SOURCE_FILE_AT_LINE (133)).substract_operation (inLexique, var_cas_sliceSize.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (133)) COMMA_SOURCE_FILE_AT_LINE (133)) ;
                              inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__5D_) COMMA_HERE) ;
                              var_cas_bitDefinitionString.dotAssign_operation (var_cas_sliceName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (135))) ;
                              var_cas_bitDefinitionString.appendCString ("[") ;
                              var_cas_bitDefinitionString.dotAssign_operation (var_cas_sliceSize.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (135)).reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (135))) ;
                              var_cas_bitDefinitionString.appendCString ("]") ;
                              } break ;
                            default :
                              break ;
                          }
                          var_cas_bitSliceTable.modifier_insertKey (inLexique, var_cas_sliceName, var_cas_sliceIndex.substract_operation (inLexique, var_cas_sliceWidth COMMA_SOURCE_FILE_AT_LINE (137)), var_cas_sliceWidth COMMA_SOURCE_FILE_AT_LINE (137)) ;
                        switch (select_piccoloDevice_5F_syntax_10 (inLexique)) {
                          case 2 : {
                            inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__2F_) COMMA_HERE) ;
                            var_cas_bitDefinitionString.appendCString ("/") ;
                            } break ;
                          default :
                            syntaxRepeat_10 = false ;
                            break ;
                        }
                      }
                    }
                    var_cas_sliceIndex = var_cas_sliceIndex.substract_operation (inLexique, var_cas_sliceWidth COMMA_SOURCE_FILE_AT_LINE (142)) ;
                    } break ;
                  case 2 : {
                    inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__2D_) COMMA_HERE) ;
                    var_cas_bitDefinitionString.appendCString ("-") ;
                    var_cas_sliceIndex.decrement_operation (inLexique COMMA_SOURCE_FILE_AT_LINE (146)) ;
                    } break ;
                  default :
                    break ;
                }
              switch (select_piccoloDevice_5F_syntax_8 (inLexique)) {
                case 2 : {
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__2C_) COMMA_HERE) ;
                  var_cas_bitDefinitionString.appendCString (", ") ;
                  } break ;
                default :
                  syntaxRepeat_8 = false ;
                  break ;
              }
            }
          }
          const GGS_bool cond_4460 = (var_cas_sliceIndex).operator_isNotEqual (GGS_uint (0U)) ;
          if (cond_4460.isBuiltAndTrue ()) {
            var_cas_registerName.reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, ((GGS_string ("Incorrect bit definition for register '")).operator_concat (var_cas_registerName)).operator_concat (GGS_string ("'")) COMMA_SOURCE_FILE_AT_LINE (154)) ;
          }
          var_cas_bitDefinitionString.appendCString (">") ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3E_) COMMA_HERE) ;
          var_cas_registerTable.modifier_insertKey (inLexique, var_cas_registerName, var_cas_registerAddressList, GGS_uint (1U), var_cas_bitSliceTable, var_cas_bitDefinitionString COMMA_SOURCE_FILE_AT_LINE (157)) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__3B_) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_6 = false ;
          break ;
      }
    }
  }
  GGS_configRegisterMap  var_cas_configRegisterMap = GGS_configRegisterMap ::constructor_emptyMap (inLexique COMMA_SOURCE_FILE_AT_LINE (160)) ;
  { bool syntaxRepeat_12 = true ;
    while (syntaxRepeat_12) {
      switch (select_piccoloDevice_5F_syntax_12 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_configuration) COMMA_HERE) ;
          GGS_lstring  var_cas_configRegisterName ;
          inLexique.assignFromAttribute_tokenString (var_cas_configRegisterName) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_identifier) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_at) COMMA_HERE) ;
          GGS_luint  var_cas_configRegisterAddress ;
          inLexique.assignFromAttribute_uint_33__32_value (var_cas_configRegisterAddress) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_width) COMMA_HERE) ;
          GGS_luint  var_cas_configRegisterWidth ;
          inLexique.assignFromAttribute_uint_33__32_value (var_cas_configRegisterWidth) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
          GGS_illegalMaskList  var_cas_illegalMaskList = GGS_illegalMaskList ::constructor_emptyList () ;
          { bool syntaxRepeat_13 = true ;
            while (syntaxRepeat_13) {
              switch (select_piccoloDevice_5F_syntax_13 (inLexique)) {
                case 2 : {
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_illegal) COMMA_HERE) ;
                  GGS_luint  var_cas_illegalValue ;
                  inLexique.assignFromAttribute_uint_33__32_value (var_cas_illegalValue) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_mask) COMMA_HERE) ;
                  GGS_luint  var_cas_illegalMask ;
                  inLexique.assignFromAttribute_uint_33__32_value (var_cas_illegalMask) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_message) COMMA_HERE) ;
                  GGS_lstring  var_cas_illegalDescriptionString ;
                  inLexique.assignFromAttribute_tokenString (var_cas_illegalDescriptionString) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_string) COMMA_HERE) ;
                  var_cas_illegalMaskList.addAssign_operation (var_cas_illegalValue, var_cas_illegalMask, var_cas_illegalDescriptionString) ;
                  } break ;
                default :
                  syntaxRepeat_13 = false ;
                  break ;
              }
            }
          }
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__7B_) COMMA_HERE) ;
          GGS_configRegisterMaskMap  var_cas_configRegisterMaskMap = GGS_configRegisterMaskMap ::constructor_emptyMap (inLexique COMMA_SOURCE_FILE_AT_LINE (181)) ;
          GGS_stringset  var_cas_settingNameSet = GGS_stringset ::constructor_emptySet () ;
          { bool syntaxRepeat_14 = true ;
            while (syntaxRepeat_14) {
              switch (select_piccoloDevice_5F_syntax_14 (inLexique)) {
                case 2 : {
                  GGS_lstring  var_cas_maskName ;
                  inLexique.assignFromAttribute_tokenString (var_cas_maskName) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_identifier) COMMA_HERE) ;
                  const GGS_bool cond_5571 = var_cas_settingNameSet.reader_hasKey (var_cas_maskName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (186))) ;
                  if (cond_5571.isBuiltAndTrue ()) {
                    var_cas_maskName.reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, ((GGS_string ("The '")).operator_concat (var_cas_maskName)).operator_concat (GGS_string ("' setting is already defined")) COMMA_SOURCE_FILE_AT_LINE (188)) ;
                  }
                  var_cas_settingNameSet.addAssign_operation (var_cas_maskName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (189))) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_mask) COMMA_HERE) ;
                  GGS_luint  var_cas_maskValue ;
                  inLexique.assignFromAttribute_uint_33__32_value (var_cas_maskValue) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_description) COMMA_HERE) ;
                  GGS_lstring  var_cas_maskDescriptionString ;
                  inLexique.assignFromAttribute_tokenString (var_cas_maskDescriptionString) ;
                  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_string) COMMA_HERE) ;
                  GGS_fieldSettingMap  var_cas_fieldSettingMap = GGS_fieldSettingMap ::constructor_emptyMap (inLexique COMMA_SOURCE_FILE_AT_LINE (194)) ;
                  { bool syntaxRepeat_15 = true ;
                    while (syntaxRepeat_15) {
                        inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_setting) COMMA_HERE) ;
                        GGS_luint  var_cas_value ;
                        inLexique.assignFromAttribute_uint_33__32_value (var_cas_value) ;
                        inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                        inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_mask) COMMA_HERE) ;
                        GGS_luint  var_cas_mask ;
                        inLexique.assignFromAttribute_uint_33__32_value (var_cas_mask) ;
                        inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_integer) COMMA_HERE) ;
                        inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_description) COMMA_HERE) ;
                        GGS_lstring  var_cas_descriptionString ;
                        inLexique.assignFromAttribute_tokenString (var_cas_descriptionString) ;
                        inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken_string) COMMA_HERE) ;
                        var_cas_fieldSettingMap.modifier_insertKey (inLexique, var_cas_descriptionString, var_cas_value.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (202)), var_cas_mask.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (202)) COMMA_SOURCE_FILE_AT_LINE (202)) ;
                      switch (select_piccoloDevice_5F_syntax_15 (inLexique)) {
                        case 2 : {
                          } break ;
                        default :
                          syntaxRepeat_15 = false ;
                          break ;
                      }
                    }
                  }
                  var_cas_configRegisterMaskMap.modifier_insertKey (inLexique, var_cas_maskName, var_cas_maskValue, var_cas_maskDescriptionString, var_cas_fieldSettingMap COMMA_SOURCE_FILE_AT_LINE (205)) ;
                  } break ;
                default :
                  syntaxRepeat_14 = false ;
                  break ;
              }
            }
          }
          inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__7D_) COMMA_HERE) ;
          var_cas_configRegisterMap.modifier_insertKey (inLexique, var_cas_configRegisterName, var_cas_configRegisterAddress, var_cas_configRegisterWidth, var_cas_configRegisterMaskMap, var_cas_illegalMaskList COMMA_SOURCE_FILE_AT_LINE (208)) ;
          } break ;
        default :
          syntaxRepeat_12 = false ;
          break ;
      }
    }
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (C_Lexique_piccoloDevice_5F_lexique::kToken__7D_) COMMA_HERE) ;
  const GGS_bool cond_6841 = ((var_cas_processorName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (218))).operator_isEqual (GGS_string ("pic18_60"))).operator_or ((var_cas_processorName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (218))).operator_isEqual (GGS_string ("pic18_80"))) ;
  if (cond_6841.isBuiltAndTrue ()) {
    GGS_uintlist  automatic_var_6635_0 ;
    GGS_uint  automatic_var_6635_1 ;
    GGS_bitSliceTable  automatic_var_6635_2 ;
    GGS_string automatic_var_6635_3 ;
    if (var_cas_registerTable.isBuilt ()) {
      var_cas_registerTable (HERE)->method_searchKey (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("BSR"), GGS_location (inLexique) COMMA_SOURCE_FILE_AT_LINE (219)), automatic_var_6635_0, automatic_var_6635_1, automatic_var_6635_2, automatic_var_6635_3 COMMA_SOURCE_FILE_AT_LINE (219)) ;
    }
    GGS_uintlist  automatic_var_6701_0 ;
    GGS_uint  automatic_var_6701_1 ;
    GGS_bitSliceTable  automatic_var_6701_2 ;
    GGS_string automatic_var_6701_3 ;
    if (var_cas_registerTable.isBuilt ()) {
      var_cas_registerTable (HERE)->method_searchKey (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("TOSL"), GGS_location (inLexique) COMMA_SOURCE_FILE_AT_LINE (220)), automatic_var_6701_0, automatic_var_6701_1, automatic_var_6701_2, automatic_var_6701_3 COMMA_SOURCE_FILE_AT_LINE (220)) ;
    }
    GGS_uintlist  automatic_var_6767_0 ;
    GGS_uint  automatic_var_6767_1 ;
    GGS_bitSliceTable  automatic_var_6767_2 ;
    GGS_string automatic_var_6767_3 ;
    if (var_cas_registerTable.isBuilt ()) {
      var_cas_registerTable (HERE)->method_searchKey (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("TOSH"), GGS_location (inLexique) COMMA_SOURCE_FILE_AT_LINE (221)), automatic_var_6767_0, automatic_var_6767_1, automatic_var_6767_2, automatic_var_6767_3 COMMA_SOURCE_FILE_AT_LINE (221)) ;
    }
    GGS_uintlist  automatic_var_6833_0 ;
    GGS_uint  automatic_var_6833_1 ;
    GGS_bitSliceTable  automatic_var_6833_2 ;
    GGS_string automatic_var_6833_3 ;
    if (var_cas_registerTable.isBuilt ()) {
      var_cas_registerTable (HERE)->method_searchKey (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("TOSU"), GGS_location (inLexique) COMMA_SOURCE_FILE_AT_LINE (222)), automatic_var_6833_0, automatic_var_6833_1, automatic_var_6833_2, automatic_var_6833_3 COMMA_SOURCE_FILE_AT_LINE (222)) ;
    }
  }
  GGS_string var_cas_sharedBankName = GGS_string ("") ;
  const GGS_bool cond_7415 = (var_cas_processorName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (226))).operator_isEqual (GGS_string ("mid-range")) ;
  if (cond_7415.isBuiltAndTrue ()) {
    {
      GGS_ramBankTable::cEnumerator enumerator_7023 (var_cas_ramBankTable, true) ;
      const GGS_ramBankTable::cElement * operand_7023 = NULL ;
      while (((operand_7023 = enumerator_7023.nextObject ()))
          && ((var_cas_sharedBankName).operator_isEqual (GGS_string ("")).isBuiltAndTrue ())) {
        macroValidPointer (operand_7023) ;
        GGS_uint  var_cas_bankAccessibility = GGS_uint (1U).left_shift_operation (inLexique, operand_7023->mInfo.mFirstFreeAddress.right_shift_operation (inLexique, GGS_uint (7U) COMMA_SOURCE_FILE_AT_LINE (228)) COMMA_SOURCE_FILE_AT_LINE (228)) ;
        {
          GGS_uintlist::cEnumerator enumerator_7151 (operand_7023->mInfo.mMirrorOffsetList, true) ;
          const GGS_uintlist::cElement * operand_7151 = NULL ;
          while (((operand_7151 = enumerator_7151.nextObject ()))) {
            macroValidPointer (operand_7151) ;
            var_cas_bankAccessibility = (var_cas_bankAccessibility).operator_or (GGS_uint (1U).left_shift_operation (inLexique, operand_7023->mInfo.mFirstFreeAddress.add_operation (inLexique, operand_7151->mValue COMMA_SOURCE_FILE_AT_LINE (230)).right_shift_operation (inLexique, GGS_uint (7U) COMMA_SOURCE_FILE_AT_LINE (230)) COMMA_SOURCE_FILE_AT_LINE (230))) ;
          }
        }
        const GGS_bool cond_7386 = (GGS_uint (1U).left_shift_operation (inLexique, var_cas_bankCount.reader_uint (inLexique COMMA_SOURCE_FILE_AT_LINE (232)) COMMA_SOURCE_FILE_AT_LINE (232))).operator_isEqual (var_cas_bankAccessibility.add_operation (inLexique, GGS_uint (1U) COMMA_SOURCE_FILE_AT_LINE (232))) ;
        if (cond_7386.isBuiltAndTrue ()) {
          var_cas_sharedBankName = operand_7023->mKey.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (233)) ;
        }
      }
    }
  }
  var_cas_outPiccoloDeviceModel = GGS_piccoloDeviceModel::constructor_new (var_cas_deviceName, var_cas_processorType, var_cas_romSize, var_cas_bankCount, var_cas_registerTable, var_cas_ramBankTable, var_cas_eepromSize, var_cas_eepromAddress, var_cas_configRegisterMap, var_cas_sharedBankName) ;
}

//---------------------------------------------------------------------------*

